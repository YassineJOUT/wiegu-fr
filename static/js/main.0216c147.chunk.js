(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{236:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAACiCAMAAACOPlkUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDM0NCRDVEQTREQTQxMUU0QkM3QTk1QUJBMkI0NjFGRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDM0NCRDVEQjREQTQxMUU0QkM3QTk1QUJBMkI0NjFGRiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMzQ0JENUQ4NERBNDExRTRCQzdBOTVBQkEyQjQ2MUZGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMzQ0JENUQ5NERBNDExRTRCQzdBOTVBQkEyQjQ2MUZGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gXtsfgAAAPBQTFRFvL7A4eLj2tvcycrM7/Dw0NLTy8zO2drb/Pz8xcfIwsPFxMbI9vb2yMrMvsDC+Pj47+/w0NHT5+jo1tfZwMLDyszN+/v7wcPF3d7fw8XHv8HDxMbHycvMwMLE3N3e7u7vyMnL19jZ19na4OHi5OXm7e7u+/v83t/g9fX1w8TG6uvr6+zs8vLy9/j43+Dh+fn55ufoyszO9/f3z9HSyMrL+fn65ebn8fHy/f395+jp0dPU4uLjwcPEzc7Q6Ojp4+TlzM7PycvNysvN/v7+xcbI1NXW9/f49vf3+vr7+Pn5x8jK7e3u8PDx/v7/1dbY////QfTwyQAAAFB0Uk5T/////////////////////////////////////////////////////////////////////////////////////////////////////////wATc6Z5AAAC4UlEQVR42uzdZ2/TUBSAYSdlpEkLBNrs7l32hrbsvf//v+GTJQvVSrApco+f5wdc6Rz5/XavnPyqou5wPpLO+wfZ6e4czMcyfJ2O9nTcKXPQ+Ovdqn2KSSUDGSbB7Gen24g2XTJKR9spe9JHgcxiMdoXtJCdrhkukE462rWSB125KhCBCEQgAhGIQAQiEIEIRCACEYhABCIQgQhEIAIRiEAEIhCBCEQgAhGIQAQiEIEIRCACEYhABCIQgQhEIAIRiEAEIhCBCEQgAhGIQAQiEIEIRCACEYhABCIQgQhEIAIRiEAEIhCBCEQgAhGIQAQiEIEIRCACEYhABCIQgQhEIAIRiEAEIhCBCEQgAhGIQAQiEIEIRCACEYhABCIQgQhEIAIRiEAEIhCBCEQgAjkL42hf0H52uo1wgYzS0XbKnnRbILN4sdKOpN//lJ1uEGu6dvvkTTra936/1KKGXwQyi1avFUlv90d2umefW7H0Wulo73q7/+YggcB5IBAQCAgEBAICAYGAQEAgIBAQCCAQEAgIBAQCAgGBgEBAICAQEAhQKJC9hxchuO5h4UAmCYQ3KBxI1/KIryEQEAgIBAQCAgGBgEBAICAQgSCQ2QO5b3nEV/yqSXNyCYKbvHTdHbwHAYGAQEAgIBAQCAgEBAIIBAQCAgGBQHUC2Vufg5p6dHNqIEfeB1Bf21MDuWFJ1Nd1gYBAQCAgEBAICAQEAgIBgYBABAJ/FchPS6K+7k0N5IMlUV9Ppgay8O0C1NTaYw+mwItCEAgIBAQCAgGBgEBAIIBAQCAgEPjPgRw2ILxbhQNZd/2Z+FYLB9K1POJrCAQEAgIBgYBAQCAgEBAICOQPc5ZHfIPCgWxvXobgNtfc5gXX3UEgIBAQCAgEBAICAYEAAgGBgEBAICAQqGQgq00gx7HnMpBvJVmyBMizLBAQCAgEBAICAYGAQOB8BzKyBMjz1gog30Hyast/gOF0W89/CzAAvnRVCD9HJI8AAAAASUVORK5CYII="},252:function(e,t,a){e.exports=a(397)},397:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(67),c=a.n(l),i=a(49),s=a(89),o=a(32),m=a(28),u=Object(m.a)(),d=a(91),E=a.n(d),g=a(120),p=a(406),A=a(407),h=a(408),v=a(405),b=a(409),C=a(24),y=a(40),f=y.d().email("Must be a valid email address").max(255,"Too long for an email").required("Email is required"),I=y.d().min(8,"Password must have at least 8 caracters").max(255,"Too long password").required("Password is required"),Q=y.a().test("len","Confirmation code must be a 4 digits number",(function(e){return e&&4===e.toString().length})).positive("Confirmation code must be positive").required("Confirmation code is required"),B=y.d().min(3,"Username must have more than 3 caracters").max(50,"Username must have less than 50 caracters").required("Username is required"),w=y.b().shape({email:f,password:I}),S=y.b().shape({email:f}),x=(y.b().shape({confirmationCode:Q}),y.b().shape({password1:I,password:y.d().oneOf([y.c("password1"),null],"Passwords must match")}),y.b().shape({username:B,email:f,password:I})),j=a(23),O=a(101),R=a.n(O),N={headers:{"Content-Type":"application/json"}},M=function(e){return R.a.post("http://localhost:8080/VATO/api/users/signin.php",JSON.stringify({username:e.email,password:e.password}),N)},G=function(e){var t=new URLSearchParams;return t.append("email",e.email),t.append("username",e.username||""),t.append("password",void 0===e.password?"":e.password),R.a.post("http://localhost:8080/VATO/api/users/signup.php",JSON.stringify(e),N)},T=function(e,t){switch(t.type){case"success":return{success:!0,message:t.message};case"failure":return{success:!1,error:t.error};default:return Object(i.a)({},e)}},k=function(){var e=Object(n.useReducer)(T,{success:!1,error:"",message:""}),t=Object(s.a)(e,2),a=t[0],l=a.success,c=a.message,o=a.error,m=t[1],u=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n,r,l,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,r=a.resetForm,n(!0),m({type:"request"}),e.prev=3,e.next=6,G(t);case 6:l=e.sent,console.log(l),(c=Object(i.a)({},l.data)).success?m({type:"success",message:c.message}):m({type:"failure",error:c.message}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),m({type:"failure",error:e.t0.toString()});case 15:n(!1),r();case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(C.c,{initialValues:{email:"",password:"",username:"",terms:!1},validationSchema:x,onSubmit:u},(function(e){var t=e.values,a=e.handleBlur,n=e.handleChange,i=e.handleSubmit,s=e.isSubmitting;return r.a.createElement(p.a,{onSubmit:i},r.a.createElement(A.a,{centered:!0,style:{width:450}},r.a.createElement(A.a.Content,{style:{margin:30}},r.a.createElement(A.a.Header,{style:{fontSize:22,padding:30}},"Rejoindre VaTo"),l&&c&&r.a.createElement(h.a,{positive:!0},r.a.createElement(h.a.Header,null,c)),!l&&o&&r.a.createElement(h.a,{negative:!0},r.a.createElement(h.a.Header,null,o)),r.a.createElement(A.a.Description,null,r.a.createElement("div",{className:"msg-error"}," ",r.a.createElement(C.a,{name:"email"})),r.a.createElement(p.a.Field,{style:{padding:5}},r.a.createElement(C.b,{type:"email",name:"email",placeholder:"E-mail"})),r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"password"})),r.a.createElement(p.a.Field,{style:{padding:5}},r.a.createElement(C.b,{type:"password",name:"password",placeholder:"Mot de passe"})),r.a.createElement("div",{className:"msg-error"}," ",r.a.createElement(C.a,{name:"username"})),r.a.createElement(p.a.Field,{style:{padding:5}},r.a.createElement(C.b,{type:"text",name:"username",placeholder:"Nom d'utilisateur"})))),r.a.createElement(A.a.Content,{extra:!0,style:{paddingLeft:40,paddingRight:40}},r.a.createElement("div",{className:"msg-error"}," ",r.a.createElement(C.a,{name:"terms"})),r.a.createElement(p.a.Field,null,r.a.createElement(v.a,{label:"J'ai lu et j'accepte les conditions g\xe9n\xe9rales d'utilisation.",onChange:n,onBlur:a,name:"terms",checked:t.terms})),r.a.createElement(b.a,Object.assign({type:"submit",color:"teal",fluid:!0,size:"large"},s?{loading:!0}:{}),"Rejoindre"))))})),r.a.createElement(h.a,null,"D\xe9j\xe0 membre de VaTo ? ",r.a.createElement(j.a,{to:"/login"},"Se connecter"),r.a.createElement("br",null),r.a.createElement(j.a,{to:"/"},"Mot de passe oubli\xe9 ?")))},z=a(410),J=a(411),Z=function(e){var t=e.children;return r.a.createElement("div",null,r.a.createElement(z.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(z.a.Column,{style:{maxWidth:450}},r.a.createElement(J.a,{as:"h2",color:"teal",textAlign:"center"}),t)))},D=function(){return r.a.createElement(Z,null,r.a.createElement(k,null))},L=function(){return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(A.a,{centered:!0,style:{width:450}},r.a.createElement(A.a.Content,{style:{margin:20}},r.a.createElement(A.a.Header,{style:{fontSize:22,padding:30}},"Connexion \xe0 VaTo"),r.a.createElement(A.a.Description,null,r.a.createElement(j.a,{to:"/login-link"},r.a.createElement(b.a,{color:"grey",fluid:!0,size:"large",style:{marginBottom:20}},"Obtenir un lien magique")),r.a.createElement(j.a,{to:"/login"},r.a.createElement(b.a,{type:"submit",color:"teal",fluid:!0,size:"large"},"Connexion avec mot de passe")))))),r.a.createElement(h.a,null,r.a.createElement(j.a,{to:"/login"},"Retour")))},Y=function(){return r.a.createElement(Z,null,r.a.createElement(L,null))},P=function(){return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(A.a,{centered:!0,style:{width:450}},r.a.createElement(A.a.Content,{style:{margin:20}},r.a.createElement(A.a.Header,{style:{fontSize:22,padding:30}},"Connexion \xe0 VaTo"),r.a.createElement(A.a.Description,{style:{textAlign:"left"}},r.a.createElement("p",null,"Nous vous avons envoy\xe9 un lien magique ! "),r.a.createElement("p",null,"Nous avons envoy\xe9 un e-mail \xe0 monadresse@mail.com "),r.a.createElement("p",null,"Il contient un lien magique qui vous connectera \xe0 votre compte."," "),r.a.createElement(j.a,{to:"/login"},r.a.createElement(b.a,{type:"submit",color:"teal",fluid:!0,size:"large",style:{marginTop:30}},"Connexion avec mot de passe")))))),r.a.createElement(h.a,null,r.a.createElement(j.a,{to:"/"},"Retour")))},U=function(){return r.a.createElement(Z,null,r.a.createElement(P,null))},V=function(){return r.a.createElement(C.c,{initialValues:{email:"",password:""},validationSchema:S,onSubmit:function(e,t){var a=t.setSubmitting,n=t.resetForm;a(!0),a(!1),n()}},(function(e){var t=e.handleSubmit;return r.a.createElement(p.a,{onSubmit:t},r.a.createElement(A.a,{centered:!0,style:{width:450}},r.a.createElement(A.a.Content,{style:{margin:20}},r.a.createElement(A.a.Header,{style:{fontSize:22,padding:30}},"Connexion \xe0 VaTo"),r.a.createElement(A.a.Description,{style:{textAlign:"left"}},r.a.createElement(p.a.Field,{style:{padding:5}},r.a.createElement("div",{className:"msg-error"}," ",r.a.createElement(C.a,{name:"email"})),r.a.createElement(C.b,{type:"text",placeholder:"Email",name:"email"})),r.a.createElement(j.a,{to:"login-link-text"},r.a.createElement(b.a,{type:"submit",color:"teal",fluid:!0,size:"large",style:{marginTop:30}},"Suivant"))))))}),r.a.createElement(h.a,null,r.a.createElement(j.a,{to:"/login"},"Retour>")))},H=function(){return r.a.createElement(Z,null,r.a.createElement(V,null))},F=a(94),X=a(238),W=a(236),q=a.n(W),K=function(){return r.a.createElement("div",null,r.a.createElement(J.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(F.a,{name:"users",circular:!0}),r.a.createElement(J.a.Content,null,"Friends")),r.a.createElement(X.a,{centered:!0,size:"large",src:q.a}),r.a.createElement(b.a,{onClick:function(){return u.push("/login")},type:"submit",color:"teal",fluid:!0,size:"large"},"Logout"))},$=function(){return r.a.createElement(Z,null,r.a.createElement(K,null))},_=a(237),ee=a(240),te=a(239),ae=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(_.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).render=function(){var t="";return e.props.isAuthenticated||(t=e.props.authenticationPath),t?n.createElement(o.b,Object.assign({},e.props,{component:function(){return n.createElement(o.a,{to:{pathname:t}})},render:void 0})):n.createElement(o.b,e.props)},e}return a}(o.b),ne=function(e){try{var t=JSON.stringify(e);localStorage.setItem("vato-sate",t)}catch(a){}},re={contextState:{isLogged:!1,user:{id:"",role:""}},setContext:function(){throw new Error("setContext function must be overridden")}},le=Object(n.createContext)(re),ce=function(){var e=Object(n.useContext)(le),t=(e.contextState,e.setContext),a=Object(n.useReducer)(T,{success:!1,error:"",message:""}),l=Object(s.a)(a,2),c=l[0],o=c.success,m=c.error,d=l[1],v=function(){var e=Object(g.a)(E.a.mark((function e(a,n){var r,l,c,s,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,l=n.resetForm,r(!0),d({type:"request"}),e.prev=3,e.next=6,M(a);case 6:c=e.sent,s=Object(i.a)({},c.data),console.log(c),s.success?(u.push("/profile"),o={contextState:{isLogged:s.success,user:{id:"1",role:"admin"}},setContext:t},t(o),ne(o),d({type:"success",message:s.message})):d({type:"failure",error:s.message}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),d({type:"failure",error:e.t0.toString()});case 15:r(!1),l();case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(C.c,{initialValues:{email:"",password:""},validationSchema:w,onSubmit:v},(function(e){var t=e.values,a=e.handleBlur,n=e.handleChange,l=e.handleSubmit,c=e.isSubmitting;return r.a.createElement(p.a,{onSubmit:l},r.a.createElement(A.a,{centered:!0,style:{width:450}},r.a.createElement(A.a.Content,{style:{margin:20}},r.a.createElement(A.a.Header,{style:{fontSize:22,padding:30}},"Connexion \xe0 VaTo"),!o&&m&&r.a.createElement(h.a,{negative:!0},r.a.createElement(h.a.Header,null,m)),r.a.createElement(A.a.Description,null,r.a.createElement("div",{className:"msg-error"}," ",r.a.createElement(C.a,{name:"email"})),r.a.createElement(p.a.Field,{style:{padding:5}},r.a.createElement("input",{type:"email",placeholder:"E-mail",onChange:n,onBlur:a,name:"email",value:t.email})),r.a.createElement("div",{className:"msg-error"}," ",r.a.createElement(C.a,{name:"password"})),r.a.createElement(p.a.Field,{style:{padding:5}},r.a.createElement("input",{type:"password",placeholder:"Mot de passe",onChange:n,onBlur:a,name:"password",value:t.password})))),r.a.createElement(A.a.Content,{extra:!0,style:{paddingLeft:40,paddingRight:40}},r.a.createElement(b.a,Object.assign({type:"submit",color:"teal",fluid:!0,size:"large"},c&&{loading:!0}),"Connexion"))))})),r.a.createElement(h.a,null,"Pas de compte ? ",r.a.createElement(j.a,{to:"/register"},"Rejoindre VaTo"),r.a.createElement("br",null),r.a.createElement(j.a,{to:"/"},"Mot de passe oubli\xe9 ?")))},ie=function(){return r.a.createElement(Z,null,r.a.createElement(ce,null))},se=function(){var e=localStorage.getItem("vato-sate");return null!==e?JSON.parse(e):re}(),oe=function(){var e=Object(n.useState)(se),t=Object(s.a)(e,2),a=t[0],l=t[1];console.log(a);var c={isAuthenticated:a.contextState.isLogged,authenticationPath:"/"};return r.a.createElement("div",null,r.a.createElement(le.Provider,{value:Object(i.a)(Object(i.a)({},a),{},{setContext:l})},r.a.createElement(o.c,{history:u},r.a.createElement(o.b,{path:"/",exact:!0,component:function(){return r.a.createElement(o.a,{to:a.contextState.isLogged?"/profile":"login"})}}),r.a.createElement(o.b,{path:"/login",exact:!0,component:ie}),r.a.createElement(ae,Object.assign({},c,{exact:!0,path:"/login-link",component:H})),r.a.createElement(ae,Object.assign({},c,{exact:!0,path:"/profile",component:$})),r.a.createElement(ae,Object.assign({},c,{exact:!0,path:"/register",component:D})),r.a.createElement(ae,Object.assign({},c,{exact:!0,path:"/login-link-text",component:U})),r.a.createElement(ae,Object.assign({},c,{exact:!0,path:"/",component:Y})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[252,1,2]]]);
//# sourceMappingURL=main.0216c147.chunk.js.map