{"version":3,"sources":["images/centered-paragraph.png","utilities/history.ts","utilities/validationSchema.tsx","utilities/config.ts","services/users.ts","utilities/reducers.ts","components/Register/Form/index.tsx","pages/layouts/Layout.tsx","pages/RegistrationPage.tsx","components/Login/Link/Chose.tsx","pages/LoginLink/ChosePage.tsx","components/Login/Link/Message.tsx","pages/LoginLink/MessagePage.tsx","components/Login/Link/Email.tsx","pages/LoginLink/EmailPage.tsx","components/Profile/index.tsx","pages/ProfilePage.tsx","utilities/protectedRoute.tsx","utilities/useAuth.ts","components/Login/Form/index.tsx","pages/LoginPage.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","history","createBrowserHistory","validEmail","Yup","email","max","required","validPassword","min","validConfirmationCode","test","t","toString","length","positive","validUsername","loginValidationSchema","shape","password","EmailValidationSchema","registrationSchema","confirmationCode","password1","oneOf","username","API_URL","console","log","process","headersOptions","headers","userService","endPoint","axios","get","values","post","JSON","stringify","params","URLSearchParams","append","undefined","reducer","state","action","type","success","message","error","RegisterForm","useReducer","dispatch","Submit","a","setSubmitting","resetForm","result","data","initialValues","terms","validationSchema","onSubmit","handleBlur","handleChange","handleSubmit","isSubmitting","Form","Card","centered","style","width","Content","margin","Header","fontSize","padding","Message","negative","Description","className","name","Field","placeholder","extra","paddingLeft","paddingRight","Checkbox","label","onChange","onBlur","checked","Button","color","fluid","size","loading","to","Layout","children","Grid","textAlign","height","verticalAlign","Column","maxWidth","as","RegisterPage","LoginChoseForm","marginBottom","LoginChosePage","LoginMessageForm","marginTop","LoginPagePage","LoginEmailForm","LoginEmailPage","Profile","icon","Icon","circular","Image","src","img","onClick","push","ProfilePage","ProtectedRoute","render","redirectPath","props","isAuthenticated","authenticationPath","component","pathname","Route","saveState","serializedState","localStorage","setItem","initialContext","contextState","isLogged","user","id","role","setContext","Error","Context","createContext","LoginForm","useContext","v","value","LoginPage","loadedState","getItem","parse","loadState","App","useState","context","useEffect","then","catch","err","defaultProtectedRouteProps","Provider","path","exact","LoginTextPage","Boolean","window","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.16bcd95e.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAACiCAMAAACOPlkUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDM0NCRDVEQTREQTQxMUU0QkM3QTk1QUJBMkI0NjFGRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDM0NCRDVEQjREQTQxMUU0QkM3QTk1QUJBMkI0NjFGRiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMzQ0JENUQ4NERBNDExRTRCQzdBOTVBQkEyQjQ2MUZGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMzQ0JENUQ5NERBNDExRTRCQzdBOTVBQkEyQjQ2MUZGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gXtsfgAAAPBQTFRFvL7A4eLj2tvcycrM7/Dw0NLTy8zO2drb/Pz8xcfIwsPFxMbI9vb2yMrMvsDC+Pj47+/w0NHT5+jo1tfZwMLDyszN+/v7wcPF3d7fw8XHv8HDxMbHycvMwMLE3N3e7u7vyMnL19jZ19na4OHi5OXm7e7u+/v83t/g9fX1w8TG6uvr6+zs8vLy9/j43+Dh+fn55ufoyszO9/f3z9HSyMrL+fn65ebn8fHy/f395+jp0dPU4uLjwcPEzc7Q6Ojp4+TlzM7PycvNysvN/v7+xcbI1NXW9/f49vf3+vr7+Pn5x8jK7e3u8PDx/v7/1dbY////QfTwyQAAAFB0Uk5T/////////////////////////////////////////////////////////////////////////////////////////////////////////wATc6Z5AAAC4UlEQVR42uzdZ2/TUBSAYSdlpEkLBNrs7l32hrbsvf//v+GTJQvVSrApco+f5wdc6Rz5/XavnPyqou5wPpLO+wfZ6e4czMcyfJ2O9nTcKXPQ+Ovdqn2KSSUDGSbB7Gen24g2XTJKR9spe9JHgcxiMdoXtJCdrhkukE462rWSB125KhCBCEQgAhGIQAQiEIEIRCACEYhABCIQgQhEIAIRiEAEIhCBCEQgAhGIQAQiEIEIRCACEYhABCIQgQhEIAIRiEAEIhCBCEQgAhGIQAQiEIEIRCACEYhABCIQgQhEIAIRiEAEIhCBCEQgAhGIQAQiEIEIRCACEYhABCIQgQhEIAIRiEAEIhCBCEQgAhGIQAQiEIEIRCACEYhABCIQgQhEIAIRiEAEIhCBCEQgAjkL42hf0H52uo1wgYzS0XbKnnRbILN4sdKOpN//lJ1uEGu6dvvkTTra936/1KKGXwQyi1avFUlv90d2umefW7H0Wulo73q7/+YggcB5IBAQCAgEBAICAYGAQEAgIBAQCCAQEAgIBAQCAgGBgEBAICAQEAhQKJC9hxchuO5h4UAmCYQ3KBxI1/KIryEQEAgIBAQCAgGBgEBAICAQgSCQ2QO5b3nEV/yqSXNyCYKbvHTdHbwHAYGAQEAgIBAQCAgEBAIIBAQCAgGBQHUC2Vufg5p6dHNqIEfeB1Bf21MDuWFJ1Nd1gYBAQCAgEBAICAQEAgIBgYBABAJ/FchPS6K+7k0N5IMlUV9Ppgay8O0C1NTaYw+mwItCEAgIBAQCAgGBgEBAIIBAQCAgEPjPgRw2ILxbhQNZd/2Z+FYLB9K1POJrCAQEAgIBgYBAQCAgEBAICOQPc5ZHfIPCgWxvXobgNtfc5gXX3UEgIBAQCAgEBAICAYEAAgGBgEBAICAQqGQgq00gx7HnMpBvJVmyBMizLBAQCAgEBAICAYGAQOB8BzKyBMjz1gog30Hyast/gOF0W89/CzAAvnRVCD9HJI8AAAAASUVORK5CYII=\"","import { createBrowserHistory } from \"history\";\n\n\nexport const history = createBrowserHistory();","import * as Yup from \"yup\";\n\nconst validEmail = Yup.string()\n  .email(\"Must be a valid email address\")\n  .max(255, \"Too long for an email\")\n  .required(\"Email is required\");\n\nconst validPassword = Yup.string()\n  .min(8, \"Password must have at least 8 caracters\")\n  .max(255, \"Too long password\")\n  .required(\"Password is required\");\n\nconst validConfirmationCode = Yup.number()\n  .test(\n    \"len\",\n    \"Confirmation code must be a 4 digits number\",\n    (t) => t && t.toString().length === 4\n  )\n  .positive(\"Confirmation code must be positive\")\n  .required(\"Confirmation code is required\");\n\nconst validUsername = Yup.string()\n  .min(3, \"Username must have more than 3 caracters\")\n  .max(50, \"Username must have less than 50 caracters\")\n  .required(\"Username is required\");\n\n// const validTerms = Yup.boolean().oneOf([true], 'Must Accept Terms of Service');\n\nexport const loginValidationSchema = Yup.object().shape({\n  email: validEmail,\n  password: validPassword,\n});\n\nexport const EmailValidationSchema = Yup.object().shape({\n  email: validEmail,\n});\n\nexport const confirmationCodeFormSchema = Yup.object().shape({\n  confirmationCode: validConfirmationCode,\n});\nexport const resetPasswordSchema = Yup.object().shape({\n  password1: validPassword,\n  password: Yup.string().oneOf(\n    [Yup.ref(\"password1\"), null],\n    \"Passwords must match\"\n  ),\n});\n\nexport const registrationSchema = Yup.object().shape({\n  //t//erms: validTerms,\n  username: validUsername,\n  email: validEmail,\n  password: validPassword,\n});\n","const isDev = true;\nexport const API_URL = isDev ? \"http://localhost:8080/VATO/api/\" : \"http://weigu-api.yj-dev.com/\" ","import axios from \"axios\";\nimport { formValues } from \"../utilities/types\";\nimport { API_URL } from \"../utilities/config\";\n\nconsole.log(process.env.API_URL);\nconst headersOptions: {} = {\n  headers: { \"Content-Type\": \"application/json\" },\n};\n\nconst getStore = () => {\n  const endPoint: string = `${API_URL}users/getStore.php`;\n  return axios.get(\n    endPoint,\n    headersOptions\n  );\n}\nconst signIn = (values: formValues) => {\n  \n  const endPoint: string = `${API_URL}users/signin.php`;\n  return axios.post(\n    endPoint,\n    JSON.stringify({ username: values.email, password: values.password }),\n    headersOptions\n  );\n};\n\nconst signUp = (values: formValues) => {\n  const endPoint: string = `${API_URL}users/signup.php`;\n  let params = new URLSearchParams();\n  params.append(\"email\", values.email);\n  params.append(\"username\", values.username || \"\");\n  params.append(\n    \"password\",\n    values.password === undefined ? \"\" : values.password\n  );\n  return axios.post(endPoint, JSON.stringify(values), headersOptions);\n};\n\nconst passwordForgotten = (email: string, confirmationCoode: string = \"\") => {\n  const endPoint: string = \"http://localhost/vato/api/users/signin.php\";\n  let params = new URLSearchParams();\n  params.append(\"email\", email);\n  params.append(\"confirmationCode\", confirmationCoode);\n  return axios.post(endPoint + \"passwordForgotten\", params, headersOptions);\n};\n\nconst resetPassword = (\n  email: string,\n  confirmationCoode: string,\n  password: string\n) => {\n  const endPoint: string = \"http://localhost/vato/api/users/signin.php\";\n\n  console.log(password);\n  let params = new URLSearchParams();\n  params.append(\"email\", email);\n  params.append(\"confirmationCode\", confirmationCoode);\n  params.append(\"password\", password);\n\n  return axios.post(endPoint + \"resetPassword\", params, headersOptions);\n};\n\nexport const userService = {\n  getStore,\n  signIn,\n  signUp,\n  passwordForgotten,\n  resetPassword,\n};\n","import { State, Action } from \"./types\";\n\nexport const  reducer = (state: State, action: Action): State => {\n    switch (action.type) {\n      case \"success\":\n        return { success: true, message: action.message };\n      case \"failure\":\n        return { success: false, error: action.error };\n      default:\n        return { ...state };\n    }\n  }","import React, { useReducer } from \"react\";\nimport { Card, Form, Button, Message, Checkbox } from \"semantic-ui-react\";\nimport { Formik, Field, ErrorMessage } from \"formik\";\nimport { registrationSchema } from \"../../../utilities/validationSchema\";\nimport { Link } from \"react-router-dom\";\nimport { userService } from \"../../../services/users\";\nimport { reducer } from '../../../utilities/reducers'\nimport { formValues } from \"../../../utilities/types\";\n\nconst RegisterForm: React.SFC = () => {\n  const [{ success, message, error }, dispatch] = useReducer(reducer, {\n    success: false,\n    error: \"\",\n    message: \"\",\n  });\n\n  const Submit = async (\n    values: formValues,\n    {\n      setSubmitting,\n      resetForm,\n    }: { setSubmitting: Function; resetForm: Function }\n  ) => {\n    setSubmitting(true);\n    dispatch({ type: \"request\" });\n    try {\n      const result = await userService.signUp(values);\n      console.log(result);\n      const data = { ...result.data };\n      if (data.success) {\n        dispatch({ type: \"success\", message: data.message });\n      } else {\n        dispatch({ type: \"failure\", error: data.message });\n      }\n    } catch (err) {\n      dispatch({ type: \"failure\", error: err.toString() });\n    }\n\n    setSubmitting(false);\n    resetForm();\n  };\n  return (\n    <div>\n      <Formik\n        initialValues={{ email: \"\", password: \"\", username: \"\", terms: false }}\n        validationSchema={registrationSchema}\n        onSubmit={Submit}\n      >\n        {({ values, handleBlur, handleChange, handleSubmit, isSubmitting }) => (\n          <Form onSubmit={handleSubmit}>\n            <Card centered style={{ width: 450 }}>\n              <Card.Content style={{ margin: 30 }}>\n                <Card.Header style={{ fontSize: 22, padding: 30 }}>\n                  Rejoindre VaTo\n                </Card.Header>\n                {success && message && (\n                  <Message positive>\n                    <Message.Header>{message}</Message.Header>\n                  </Message>\n                )}\n                {!success && error && (\n                  <Message negative>\n                    <Message.Header>{error}</Message.Header>\n                  </Message>\n                )}\n                <Card.Description>\n                  <div className=\"msg-error\">\n                    {\" \"}\n                    <ErrorMessage name=\"email\" />\n                  </div>\n                  <Form.Field style={{ padding: 5 }}>\n                    <Field type=\"email\" name=\"email\" placeholder=\"E-mail\" />\n                  </Form.Field>\n                  <div className=\"msg-error\">\n                    <ErrorMessage name=\"password\" />\n                  </div>\n                  <Form.Field style={{ padding: 5 }}>\n                    <Field\n                      type=\"password\"\n                      name=\"password\"\n                      placeholder=\"Mot de passe\"\n                    />\n                  </Form.Field>\n                  <div className=\"msg-error\">\n                    {\" \"}\n                    <ErrorMessage name=\"username\" />\n                  </div>\n\n                  <Form.Field style={{ padding: 5 }}>\n                    <Field\n                      type=\"text\"\n                      name=\"username\"\n                      placeholder=\"Nom d'utilisateur\"\n                    />\n                  </Form.Field>\n                </Card.Description>\n              </Card.Content>\n              <Card.Content extra style={{ paddingLeft: 40, paddingRight: 40 }}>\n                <div className=\"msg-error\">\n                  {\" \"}\n                  <ErrorMessage name=\"terms\" />\n                </div>\n                <Form.Field>\n                  <Checkbox\n                    label=\"J'ai lu et j'accepte les conditions générales d'utilisation.\"\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    name=\"terms\"\n                    checked={values.terms}\n                  />\n                </Form.Field>\n                <Button\n                  type=\"submit\"\n                  color=\"teal\"\n                  fluid\n                  size=\"large\"\n                  {...(isSubmitting ? { loading: true } : {})}\n                >\n                  Rejoindre\n                </Button>\n              </Card.Content>\n            </Card>\n          </Form>\n        )}\n      </Formik>\n      <Message>\n        Déjà membre de VaTo ? <Link to=\"/login\">Se connecter</Link>\n        <br />\n        <Link to=\"/\">Mot de passe oublié ?</Link>\n      </Message>\n    </div>\n  );\n};\n\nexport default RegisterForm;\n","import React, { ReactNode } from \"react\";\nimport { Grid, Header } from \"semantic-ui-react\";\n\ntype Props = {\n  children: ReactNode;\n};\n\nconst Layout: React.SFC<Props> = ({ children }) => (\n  <div>\n    <Grid textAlign=\"center\" style={{ height: \"100vh\" }} verticalAlign=\"middle\">\n      <Grid.Column style={{ maxWidth: 450 }}>\n        <Header as=\"h2\" color=\"teal\" textAlign=\"center\">\n          {/* <Image src='/logo.png' /> Log-in to your account */}\n        </Header>\n        {children}\n      </Grid.Column>\n    </Grid>\n  </div>\n);\n\nexport default Layout;\n","import React from \"react\";\nimport RegisterForm from '../components/Register/Form'\nimport Layout from \"./layouts/Layout\";\n// Rejoindre VaTo\n// Adresse e-mail\n// Mot de passe\n// Nom d'utilisateur\n// I J'ai lu et j'accepte les conditions générales d'utilisation.\n// Rejoindre\n// Déjà membre de Wattpad ? Se connecter\n// Mot de passe oublié ?\nconst RegisterPage = () => (\n  <Layout>\n    <RegisterForm />\n  </Layout>\n);\n\nexport default RegisterPage;\n","import React from \"react\";\nimport { Card, Form, Button, Message } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\n// Nous vous avons envoyé un lien magique !\n// Nous avons envoyé un e-mail à monadresse@mail.com\n// Il contient un lien magique qui vous connectera à votre compte.\n// Connexion avec mot de passe\n\nconst LoginChoseForm: React.SFC = () => (\n  <div>\n    <Form>\n      <Card centered style={{ width: 450 }}>\n        <Card.Content style={{ margin: 20 }}>\n          <Card.Header style={{ fontSize: 22, padding: 30 }}>\n            Connexion à VaTo\n          </Card.Header>\n          {/* <Card.Meta>Joined in 2016</Card.Meta> */}\n          <Card.Description>\n            <Link to=\"/login-link\">\n              <Button\n                color=\"grey\"\n                fluid\n                size=\"large\"\n                style={{ marginBottom: 20 }}\n              >\n                Obtenir un lien magique\n              </Button>\n            </Link>\n            <Link to=\"/login\">\n              <Button type=\"submit\" color=\"teal\" fluid size=\"large\">\n                Connexion avec mot de passe\n              </Button>\n            </Link>\n          </Card.Description>\n        </Card.Content>\n      </Card>\n    </Form>\n    <Message>\n      <Link to=\"/login\">Retour</Link>\n    </Message>\n  </div>\n);\n\nexport default LoginChoseForm;\n","import React from \"react\";\nimport LoginChoseForm from '../../components/Login/Link/Chose'\nimport Layout from \"../layouts/Layout\";\n\nconst LoginChosePage = () => (\n  <Layout>\n    <LoginChoseForm />\n  </Layout>\n);\n\nexport default LoginChosePage;\n","import React from \"react\";\nimport { Card, Form, Button, Message } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\n\n// Connexion avec mot de passe\n\nconst LoginMessageForm: React.SFC = () => (\n  <div>\n    <Form>\n      <Card centered style={{ width: 450 }}>\n        <Card.Content style={{ margin: 20 }}>\n          <Card.Header style={{ fontSize: 22, padding: 30 }}>\n            Connexion à VaTo\n          </Card.Header>\n          {/* <Card.Meta>Joined in 2016</Card.Meta> */}\n          <Card.Description style={{ textAlign: \"left\" }}>\n            <p>Nous vous avons envoyé un lien magique ! </p>\n            <p>Nous avons envoyé un e-mail à monadresse@mail.com </p>\n            <p>\n              Il contient un lien magique qui vous connectera à votre compte.{\" \"}\n            </p>\n            <Link to=\"/login\">\n              <Button type=\"submit\" color=\"teal\" fluid size=\"large\" style={{ marginTop: 30 }}>\n                Connexion avec mot de passe\n              </Button>\n            </Link>\n          </Card.Description>\n        </Card.Content>\n      </Card>\n    </Form>\n    <Message>\n      <Link to=\"/\">Retour</Link>\n    </Message>\n  </div>\n);\n\nexport default LoginMessageForm;\n","import React from \"react\";\nimport LoginMessageForm from '../../components/Login/Link/Message'\nimport Layout from \"../layouts/Layout\";\n\nconst LoginPagePage = () => (\n  <Layout>\n    <LoginMessageForm />\n  </Layout>\n);\n\nexport default LoginPagePage;\n","import React from \"react\";\nimport { Card, Form, Button, Message } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\nimport { Formik, Field, ErrorMessage } from \"formik\";\nimport { EmailValidationSchema } from \"../../../utilities/validationSchema\";\n\n// Connexion avec mot de passe\n\nconst LoginEmailForm: React.SFC = () => {\n  const Submit = (\n    values: { email: string; password: string },\n    {\n      setSubmitting,\n      resetForm,\n    }: { setSubmitting: Function; resetForm: Function }\n  ) => {\n    setSubmitting(true);\n    //console.log(values);\n    //this.props.login(values.email, values.password);\n    setSubmitting(false);\n    resetForm();\n  };\n\n  return (\n    <Formik\n      initialValues={{ email: \"\", password: \"\" }}\n      validationSchema={EmailValidationSchema}\n      onSubmit={Submit}\n    >\n      {({ handleSubmit }) => (\n        <Form onSubmit={handleSubmit}>\n          <Card centered style={{ width: 450 }}>\n            <Card.Content style={{ margin: 20 }}>\n              <Card.Header style={{ fontSize: 22, padding: 30 }}>\n                Connexion à VaTo\n              </Card.Header>\n              {/* <Card.Meta>Joined in 2016</Card.Meta> */}\n              <Card.Description style={{ textAlign: \"left\" }}>\n                <Form.Field style={{ padding: 5 }}>\n                  <div className=\"msg-error\">\n                    {\" \"}\n                    <ErrorMessage name=\"email\" />\n                  </div>\n                  <Field type=\"text\" placeholder=\"Email\" name=\"email\" />\n                </Form.Field>\n                <Link to=\"login-link-text\">\n                  <Button\n                  type=\"submit\"\n                    color=\"teal\"\n                    fluid\n                    size=\"large\"\n                    style={{ marginTop: 30 }}\n                  >\n                    Suivant\n                  </Button>\n                </Link>\n              </Card.Description>\n            </Card.Content>\n          </Card>\n        </Form>\n      )}\n      <Message>\n        <Link to=\"/login\">Retour></Link>\n      </Message>\n    </Formik>\n  );\n};\n\nexport default LoginEmailForm;\n","import React from \"react\";\nimport LoginEmailForm from '../../components/Login/Link/Email'\nimport Layout from \"../layouts/Layout\";\n\nconst LoginEmailPage = () => (\n  <Layout>\n    <LoginEmailForm />\n  </Layout>\n);\n\nexport default LoginEmailPage;\n","import React from \"react\";\nimport { Header, Icon, Image, Button } from \"semantic-ui-react\";\nimport img from \"../../images/centered-paragraph.png\";\nimport { history } from '../../utilities/history';\nconst Profile = () => (\n  <div>\n    <Header as=\"h2\" icon textAlign=\"center\">\n      <Icon name=\"users\" circular />\n      <Header.Content>Friends</Header.Content>\n    </Header>\n    <Image centered size=\"large\" src={img} />\n    <Button\n    onClick={\n        () => history.push(\"/login\")\n    }\n      type=\"submit\"\n      color=\"teal\"\n      fluid\n      size=\"large\"\n    >\n      Logout\n    </Button>\n  </div>\n);\n\nexport default Profile;\n","\nimport React from \"react\";\nimport Profile from '../components/Profile';\nimport Layout from \"./layouts/Layout\";\n\nconst ProfilePage = () => (\n  <Layout>\n    <Profile />\n  </Layout>\n);\n\nexport default ProfilePage;\n","import * as React from 'react';\nimport {Redirect, Route, RouteProps} from 'react-router';\n\nexport interface ProtectedRouteProps extends RouteProps {\n    isAuthenticated: boolean;\n    authenticationPath: string;\n}\n\n class ProtectedRoute extends Route<ProtectedRouteProps> {\n     \n     render = () => {\n        let redirectPath: string = '';\n        if (!this.props.isAuthenticated) {\n            redirectPath = this.props.authenticationPath;\n        }\n\n        if (redirectPath) {\n            return <Route {...this.props} component={() => (<Redirect to={{pathname: redirectPath}}/>)}  render={undefined}/>;\n        } else {\n            return <Route {...this.props}/>;\n        }\n    }\n}\n\nexport default ProtectedRoute;","import { createContext, Dispatch, SetStateAction } from \"react\";\n\n// localStorage.js\nexport const loadState = (): Context => {\n  const serializedState = localStorage.getItem(\"vato-sate\");\n  if (serializedState !== null) {\n    return JSON.parse(serializedState);\n  } else return initialContext;\n};\n// localStorage.js\nexport const saveState = (state: Context) => {\n  try {\n    const serializedState = JSON.stringify(state);\n    localStorage.setItem(\"vato-sate\", serializedState);\n  } catch {}\n};\nexport interface AuthType {\n  isLogged: boolean;\n  user: {\n    id: string;\n    role: string;\n  };\n}\n\nexport const initialState: AuthType = {\n  isLogged: false,\n  user: {\n    id: \"\",\n    role: \"\",\n  },\n};\n\nexport type Context = {\n  contextState: AuthType;\n  setContext: Dispatch<SetStateAction<Context>>;\n};\n\nexport const initialContext: Context = {\n  contextState: initialState,\n  setContext: (): void => {\n    throw new Error(\"setContext function must be overridden\");\n  },\n};\nexport const Context = createContext<Context>(initialContext);\n","import React, { useReducer, useContext } from \"react\";\nimport { Card, Form, Button, Message } from \"semantic-ui-react\";\nimport { Formik, ErrorMessage } from \"formik\";\nimport { loginValidationSchema } from \"../../../utilities/validationSchema\";\nimport { Link } from \"react-router-dom\";\nimport { reducer } from \"../../../utilities/reducers\";\nimport { userService } from \"../../../services/users\";\nimport { history } from \"../../../utilities/history\";\nimport { Context, saveState } from \"../../../utilities/useAuth\";\n\nconst LoginForm: React.SFC = () => {\n  const {contextState, setContext} = useContext(Context);\n\n  const [{ success, error }, dispatch] = useReducer(reducer, {\n    success: false,\n    error: \"\",\n    message: \"\",\n  });\n  const Submit = async (\n    values: { email: string; password: string },\n    {\n      setSubmitting,\n      resetForm,\n    }: { setSubmitting: Function; resetForm: Function }\n  ) => {\n    setSubmitting(true);\n    dispatch({ type: \"request\" });\n    try {\n      const result = await userService.signIn(values);\n      const data = { ...result.data };\n      console.log(result);\n      if (data.success) {\n        //history push to profile\n        history.push(\"/profile\");\n        const v = {\n          contextState:{\n            isLogged: data.success,\n            user:{\n              id: '1',\n              role: 'admin'\n            }\n          },\n          setContext\n        };\n      setContext(v);\n      saveState(v);\n        dispatch({ type: \"success\", message: data.message });\n      } else {\n        dispatch({ type: \"failure\", error: data.message });\n      }\n    } catch (err) {\n      dispatch({ type: \"failure\", error: err.toString() });\n    }\n\n    setSubmitting(false);\n    resetForm();\n  };\n\n  return (\n    <div>\n      <Formik\n        initialValues={{ email: \"\", password: \"\" }}\n        validationSchema={loginValidationSchema}\n        onSubmit={Submit}\n      >\n        {({ values, handleBlur, handleChange, handleSubmit, isSubmitting }) => (\n          <Form onSubmit={handleSubmit}>\n            <Card centered style={{ width: 450 }}>\n              <Card.Content style={{ margin: 20 }}>\n                <Card.Header style={{ fontSize: 22, padding: 30 }}>\n                  Connexion à VaTo\n                </Card.Header>\n                {!success && error && (\n                  <Message negative>\n                    <Message.Header>{error}</Message.Header>\n                  </Message>\n                )}\n                <Card.Description>\n                  <div className=\"msg-error\">\n                    {\" \"}\n                    <ErrorMessage name=\"email\" />\n                  </div>\n                  <Form.Field style={{ padding: 5 }}>\n                    <input\n                      type=\"email\"\n                      placeholder=\"E-mail\"\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      name=\"email\"\n                      value={values.email}\n                    />\n                  </Form.Field>\n                  <div className=\"msg-error\">\n                    {\" \"}\n                    <ErrorMessage name=\"password\" />\n                  </div>\n                  <Form.Field style={{ padding: 5 }}>\n                    <input\n                      type=\"password\"\n                      placeholder=\"Mot de passe\"\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      name=\"password\"\n                      value={values.password}\n                    />\n                  </Form.Field>\n                </Card.Description>\n              </Card.Content>\n              <Card.Content extra style={{ paddingLeft: 40, paddingRight: 40 }}>\n                <Button\n                  type=\"submit\"\n                  color=\"teal\"\n                  fluid\n                  size=\"large\"\n                  {...(isSubmitting && { loading: true })}\n                >\n                  Connexion\n                </Button>\n              </Card.Content>\n            </Card>\n          </Form>\n        )}\n      </Formik>\n      <Message>\n        Pas de compte ? <Link to=\"/register\">Rejoindre VaTo</Link>\n        <br />\n        <Link to=\"/\">Mot de passe oublié ?</Link>\n      </Message>\n    </div>\n  );\n};\n\nexport default LoginForm;\n","// Connexion à VaTo\n// E-mail\n// Mot de passe\n// Connexion\n// Mot de passe oublié ?\nimport React from \"react\";\nimport LoginForm from '../components/Login/Form'\nimport Layout from \"./layouts/Layout\";\n\nconst LoginPage = () => (\n  <Layout>\n    <LoginForm />\n  </Layout>\n);\n\nexport default LoginPage;\n","import React, { useState, useEffect } from \"react\";\nimport { Router, Route, Redirect } from \"react-router-dom\";\nimport { history } from \"./utilities/history\";\nimport RegisterPage from \"./pages/RegistrationPage\";\nimport LoginChosePage from \"./pages/LoginLink/ChosePage\";\nimport LoginTextPage from \"./pages/LoginLink/MessagePage\";\nimport LoginEmailForm from \"./pages/LoginLink/EmailPage\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport ProtectedRoute, {\n  ProtectedRouteProps,\n} from \"./utilities/protectedRoute\";\n\nimport { Context, loadState } from \"./utilities/useAuth\";\nimport LoginPage from \"./pages/LoginPage\";\nimport { userService } from \"./services/users\";\n\nconst loadedState = loadState();\n\nconst App: React.FC = () => {\n  const [context, setContext] = useState<Context>(loadedState);\n\n  useEffect(() => {\n     userService\n      .getStore()\n      .then((data) => {\n        console.log(data);\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  });\n\n  console.log(context);\n  const defaultProtectedRouteProps: ProtectedRouteProps = {\n    isAuthenticated: context.contextState.isLogged,\n    authenticationPath: \"/\",\n  };\n  return (\n    <div>\n      <Context.Provider value={{ ...context, setContext }}>\n        <Router history={history}>\n          <Route\n            path=\"/\"\n            exact\n            component={() => (\n              <Redirect\n                to={context.contextState.isLogged ? \"/profile\" : \"login\"}\n              />\n            )}\n          />\n          <Route path=\"/login\" exact component={LoginPage} />\n          <ProtectedRoute\n            {...defaultProtectedRouteProps}\n            exact={true}\n            path=\"/login-link\"\n            component={LoginEmailForm}\n          />\n          <ProtectedRoute\n            {...defaultProtectedRouteProps}\n            exact={true}\n            path=\"/profile\"\n            component={ProfilePage}\n          />\n          <ProtectedRoute\n            {...defaultProtectedRouteProps}\n            exact={true}\n            path=\"/register\"\n            component={RegisterPage}\n          />\n\n          <ProtectedRoute\n            {...defaultProtectedRouteProps}\n            exact={true}\n            path=\"/login-link-text\"\n            component={LoginTextPage}\n          />\n          <ProtectedRoute\n            {...defaultProtectedRouteProps}\n            exact={true}\n            path=\"/\"\n            component={LoginChosePage}\n          />\n        </Router>\n      </Context.Provider>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  \n    <App />\n  ,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}