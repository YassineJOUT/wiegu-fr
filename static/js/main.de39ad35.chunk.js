(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{424:function(e,a,t){e.exports=t(624)},623:function(e,a,t){},624:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(110),c=t.n(l),s=t(29),i=t(23),o=t(52),m=t(49),u=Object(m.a)(),d=t(58),p=t.n(d),E=t(88),g=t(668),f=t(221),b=t(669),h=t(291),v=t(113),y=t(25),O=t(61),S=O.d().email("Must be a valid email address").max(255,"Too long for an email").required("Email is required"),w=O.d().min(8,"Password must have at least 8 caracters").max(255,"Too long password").required("Password is required"),j=O.a().test("len","Confirmation code must be a 4 digits number",(function(e){return e&&4===e.toString().length})).positive("Confirmation code must be positive").required("Confirmation code is required"),x=O.d().min(3,"Username must have more than 3 caracters").max(50,"Username must have less than 50 caracters").required("Username is required"),C=O.b().shape({email:S,password:w}),I=O.b().shape({email:S}),k=(O.b().shape({confirmationCode:j}),O.b().shape({password1:w,password:O.d().oneOf([O.c("password1"),null],"Passwords must match")}),O.b().shape({username:x,email:S,password:w})),N=t(38),z=t(374),L=t.n(z),R="development"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_ENV?"http://localhost:3010/":"http://weigu-api.yj-dev.com/",P=L.a.create({withCredentials:!0,baseURL:R}),H={headers:{"Content-Type":"application/x-www-form-urlencoded"}},U=function(e){return P.post("users/upload",e)},A=function(e){var a=new URLSearchParams;return a.append("address",e.address),a.append("password",e.password),a.append("bio",e.bio),a.append("id",e.id||""),P.post("users/editProfile",a,H)},F=function(e){var a=new URLSearchParams;return a.append("token",e),P.post("users/linkVerify",a,H)},W=function(e){var a=new URLSearchParams;return a.append("email",e.email),P.post("users/linkSignin",a,H)},q=function(e){var a=new URLSearchParams;return a.append("userId",e),P.post("users/profile",a,H)},D=function(e){var a=new URLSearchParams;return a.append("email",e.email),a.append("password",e.password),P.post("users/signin",a,H)},T=function(e){var a=new URLSearchParams;return a.append("email",e.email),a.append("username",e.username),a.append("password",void 0===e.password?"":e.password),a.append("age",void 0===e.age?"0":e.age.toString()),P.post("users/signup",a)},V=function(e,a){switch(a.type){case"success":return{success:!0,message:a.message};case"failure":return{success:!1,error:a.error};default:return Object(s.a)({},e)}},M=function(){var e=Object(n.useReducer)(V,{success:!1,error:"",message:""}),a=Object(i.a)(e,2),t=a[0],l=t.success,c=t.message,o=t.error,m=a[1],u=function(){var e=Object(E.a)(p.a.mark((function e(a,t){var n,r,l,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.setSubmitting,r=t.resetForm,n(!0),m({type:"request"}),e.prev=3,l={email:a.email,password:a.password,username:a.username||""},e.next=7,T(l);case 7:c=e.sent,(i=Object(s.a)({},c.data)).success?m({type:"success",message:i.message}):m({type:"failure",error:i.error}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),m({type:"failure",error:"Something went wrong"});case 15:n(!1),r();case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(a,t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(y.c,{initialValues:{email:"",password:"",username:"",terms:!1},validationSchema:k,onSubmit:u},(function(e){var a=e.values,t=e.handleBlur,n=e.handleChange,s=e.handleSubmit,i=e.isSubmitting;return r.a.createElement(g.a,{onSubmit:s},r.a.createElement(f.a,{centered:!0,style:{width:450}},r.a.createElement(f.a.Content,{style:{margin:30}},r.a.createElement(f.a.Header,{style:{fontSize:22,padding:30}},"Rejoindre Weigu"),l&&c&&r.a.createElement(b.a,{positive:!0},r.a.createElement(b.a.Header,null,c)),!l&&o&&r.a.createElement(b.a,{negative:!0},r.a.createElement(b.a.Header,null,o)),r.a.createElement(f.a.Description,null,r.a.createElement("div",{className:"msg-error"}," ",r.a.createElement(y.a,{name:"email"})),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement(y.b,{type:"email",name:"email",placeholder:"E-mail"})),r.a.createElement("div",{className:"msg-error"},r.a.createElement(y.a,{name:"password"})),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement(y.b,{type:"password",name:"password",placeholder:"Mot de passe"})),r.a.createElement("div",{className:"msg-error"}," ",r.a.createElement(y.a,{name:"username"})),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement(y.b,{type:"text",name:"username",placeholder:"Nom d'utilisateur"})))),r.a.createElement(f.a.Content,{extra:!0,style:{paddingLeft:40,paddingRight:40}},r.a.createElement("div",{className:"msg-error"}," ",r.a.createElement(y.a,{name:"terms"})),r.a.createElement(g.a.Field,null,r.a.createElement(h.a,{label:"J'ai lu et j'accepte les conditions g\xe9n\xe9rales d'utilisation.",onChange:n,onBlur:t,name:"terms",checked:a.terms})),r.a.createElement(v.a,Object.assign({type:"submit",color:"teal",fluid:!0,size:"large"},i?{loading:!0}:{}),"Rejoindre"))))})),r.a.createElement(b.a,null,"D\xe9j\xe0 membre de Weigu ? ",r.a.createElement(N.a,{to:"/login"},"Se connecter"),r.a.createElement("br",null),r.a.createElement(N.a,{to:"/"},"Mot de passe oubli\xe9 ?")))},_=t(385),B=t(670),J=function(e){var a=e.children;return r.a.createElement("div",null,r.a.createElement(_.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(_.a.Column,{style:{maxWidth:450}},r.a.createElement(B.a,{as:"h2",color:"teal",textAlign:"center"}),a)))},K=function(){return r.a.createElement(J,null,r.a.createElement(M,null))},G=function(){return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(f.a,{centered:!0,style:{width:450}},r.a.createElement(f.a.Content,{style:{margin:20}},r.a.createElement(f.a.Header,{style:{fontSize:22,padding:30}},"Connexion \xe0 Weigu"),r.a.createElement(f.a.Description,null,r.a.createElement(N.a,{to:"/login-link"},r.a.createElement(v.a,{color:"grey",fluid:!0,size:"large",style:{marginBottom:20}},"Obtenir un lien magique")),r.a.createElement(N.a,{to:"/login"},r.a.createElement(v.a,{type:"submit",color:"teal",fluid:!0,size:"large"},"Connexion avec mot de passe")))))),r.a.createElement(b.a,null,r.a.createElement(N.a,{to:"/login"},"Retour")))},$=function(){return r.a.createElement(J,null,r.a.createElement(G,null))},Q=Object(o.f)((function(e){var a=Object(s.a)({},e.match.params);return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(f.a,{centered:!0,style:{width:450}},r.a.createElement(f.a.Content,{style:{margin:20}},r.a.createElement(f.a.Header,{style:{fontSize:22,padding:30}},"Connexion \xe0 Weigu"),r.a.createElement(f.a.Description,{style:{textAlign:"left"}},r.a.createElement("p",null,"Nous vous avons envoy\xe9 un lien magique ! "),r.a.createElement("p",null,"Nous avons envoy\xe9 un e-mail \xe0 ",a.email),r.a.createElement("p",null,"Il contient un lien magique qui vous connectera \xe0 votre compte."," "),r.a.createElement(N.a,{to:"/login"},r.a.createElement(v.a,{type:"submit",color:"teal",fluid:!0,size:"large",style:{marginTop:30}},"Connexion avec mot de passe")))))),r.a.createElement(b.a,null,r.a.createElement(N.a,{to:"/"},"Retour")))})),X=function(){return r.a.createElement(J,null,r.a.createElement(Q,null))},Y=function(e){try{var a=JSON.stringify(e);localStorage.setItem("Weigu-sate",a)}catch(t){}},Z={contextState:{isLogged:!1,user:{id:"",role:""}},setContext:function(){throw new Error("setContext function must be overridden")}},ee=Object(n.createContext)(Z),ae=function(){Object(n.useContext)(ee).contextState.isLogged&&u.push("/profile");var e=Object(n.useReducer)(V,{success:!1,error:"",message:""}),a=Object(i.a)(e,2),t=a[0],l=t.success,c=t.error,o=t.message,m=a[1],d=function(){var e=Object(E.a)(p.a.mark((function e(a,t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.setSubmitting,r=t.resetForm,n(!0),m({type:"request"}),e.next=5,W(a).then((function(e){var t=Object(s.a)({},e.data);t.success?(m({type:"success",message:"Email Sent success"}),u.push("/login-link-text/"+a.email)):m({type:"failure",error:t.error})})).catch((function(e){m({type:"failure",error:"Something went wrong"})}));case 5:n(!1),r();case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(y.c,{initialValues:{email:""},validationSchema:I,onSubmit:d},(function(e){var a=e.handleSubmit,t=e.isSubmitting;return r.a.createElement(g.a,{onSubmit:a},r.a.createElement(f.a,{centered:!0,style:{width:450}},r.a.createElement(f.a.Content,{style:{margin:20}},r.a.createElement(f.a.Header,{style:{fontSize:22,padding:30}},"Connexion \xe0 Weigu"),l&&o&&r.a.createElement(b.a,{positive:!0},r.a.createElement(b.a.Header,null,o)),!l&&c&&r.a.createElement(b.a,{negative:!0},r.a.createElement(b.a.Header,null,c)),r.a.createElement(f.a.Description,{style:{textAlign:"left"}},r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement("div",{className:"msg-error"},r.a.createElement(y.a,{name:"email"})),r.a.createElement(y.b,{type:"text",placeholder:"Email",name:"email"})),r.a.createElement(v.a,{type:"submit",color:"teal",fluid:!0,size:"large",style:{marginTop:30}},t?"Loading...":"Suivant")))))})),r.a.createElement(b.a,null,r.a.createElement(N.a,{to:"/login"},"Retour")))},te=function(){return r.a.createElement(J,null,r.a.createElement(ae,null))},ne=t(671),re=t(674),le=t(678),ce=t(98),se=t(41),ie=t(142),oe=t(672),me=function(e){var a=e.handleProfileEdit,t=e.profileState,l=Object(n.useContext)(ee).contextState;l.isLogged||u.push("/login");var c=Object(n.useReducer)(V,{success:!1,error:"",message:""}),o=Object(i.a)(c,2),m=o[0],d=m.success,f=m.error,h=m.message,O=o[1],S=function(){var e=Object(E.a)(p.a.mark((function e(n,r){var c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.setSubmitting,i=r.resetForm,c(!0),O({type:"request"}),e.next=5,A(Object(s.a)(Object(s.a)({},n),{},{id:l.user.id})).then((function(e){var r=Object(s.a)({},e.data);r.success?(a(Object(s.a)(Object(s.a)({},t),n)),O({type:"success",message:"Vos information sont modifier"}),u.push("/profile")):O({type:"failure",error:r.error})})).catch((function(e){O({type:"failure",error:"Something went wrong"})}));case 5:c(!1),i();case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();return r.a.createElement(y.c,{initialValues:{address:t.address?t.address:"",bio:t.bio?t.bio:"",password:""},onSubmit:S},(function(e){var a=e.handleSubmit,t=e.isSubmitting;return r.a.createElement(g.a,{onSubmit:a,className:"edit-profile-form"},d&&h&&r.a.createElement(b.a,{positive:!0},r.a.createElement(b.a.Header,null,h)),!d&&f&&r.a.createElement(b.a,{negative:!0},r.a.createElement(b.a.Header,null,f)),r.a.createElement(ne.a,{horizontal:!0},"Informations Personnelles"),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement("div",{className:"msg-error"},r.a.createElement(y.a,{name:"address"})),r.a.createElement(y.b,{type:"text",placeholder:"Adresse",name:"address"})),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement("div",{className:"msg-error"},r.a.createElement(y.a,{name:"bio"})),r.a.createElement(y.b,{type:"text",placeholder:"Bio",name:"bio"})),r.a.createElement(ne.a,{horizontal:!0},"Changer le mot de passe"),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement("div",{className:"msg-error"},r.a.createElement(y.a,{name:"password"})),r.a.createElement(y.b,{type:"text",placeholder:"Mot de passe",name:"password"})),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement("div",{className:"msg-error"},r.a.createElement(y.a,{name:"confirmPassword"})),r.a.createElement(y.b,{type:"text",placeholder:"Confirmer le mot de passe",name:"confirmPassword"})),r.a.createElement(v.a,{type:"submit",color:"teal",fluid:!0,size:"large",style:{marginTop:30}},t?"Loading...":"Enregistrer"))}))},ue=t(243),de=function(e){var a=e.profileImage,t=e.handleUpload,l=Object(n.useContext)(ee).contextState,c=Object(n.useState)(null),s=Object(i.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),p=d[0],E=d[1],g=Object(n.useState)(null),f=Object(i.a)(g,2),h=f[0],y=f[1],O=Object(n.useState)({success:!1,message:"",error:""}),S=Object(i.a)(O,2),w=S[0],j=w.success,x=w.message,C=w.error,I=S[1];return r.a.createElement(le.a.Content,{image:!0},r.a.createElement(ie.a,{wrapped:!0,size:"medium",src:o||(a||"http://localhost:3010/users/matthew-7e89.png"),centered:!0}),r.a.createElement(le.a.Description,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ue.InputFile,{input:{id:"input-control-id",onChange:function(e){return function(e){var a;e.persist();var t=URL.createObjectURL(e.target.files&&e.target.files[0]);y((null===(a=e.target.files)||void 0===a?void 0:a[0])||null),m(t)}(e)}}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(v.a,Object.assign({disabled:null===o,onClick:function(){return function(){E(!0);var e=new FormData;h&&e.append("image",h),e.append("userId",l.user.id),e.append("type","profile"),U(e).then((function(e){e.data.success?(t(e.data.data.filename),I({success:!0,message:"Image Uploaded",error:null})):I({success:!1,message:null,error:e.data.error}),E(!1)})).catch((function(e){I({success:!1,message:null,error:"Something went wrong"}),E(!1)}))}()},positive:!0,labelPosition:"right",icon:"checkmark",content:"Upload"},p&&{loading:!0})),r.a.createElement("br",null),j&&x&&r.a.createElement(b.a,{positive:!0},r.a.createElement(b.a.Header,null,x)),!j&&C&&r.a.createElement(b.a,{negative:!0},r.a.createElement(b.a.Header,null,C))))},pe=function(e){var a=e.coverImage,t=e.handleUpload,l=Object(n.useContext)(ee).contextState,c=Object(n.useState)(null),s=Object(i.a)(c,2),o=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),E=p[0],g=p[1],f=Object(n.useState)(null),h=Object(i.a)(f,2),y=h[0],O=h[1],S=Object(n.useState)({success:!1,message:"",error:""}),w=Object(i.a)(S,2),j=w[0],x=j.success,C=j.message,I=j.error,k=w[1];return r.a.createElement(le.a.Content,{image:!0},r.a.createElement(ie.a,{wrapped:!0,size:"large",src:o||(a||"./images/cover.png"),centered:!0}),r.a.createElement(le.a.Description,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ue.InputFile,{input:{id:"input-control-id",onChange:function(e){return function(e){var a;e.persist();var t=URL.createObjectURL(e.target.files&&e.target.files[0]);O((null===(a=e.target.files)||void 0===a?void 0:a[0])||null),m(t)}(e)}}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(v.a,Object.assign({disabled:null===o,onClick:function(){return function(){g(!0);var e=new FormData;y&&e.append("image",y),e.append("userId",l.user.id),e.append("type","cover"),U(e).then((function(e){e.data.success?(t(e.data.data.filename),k({success:!0,message:"Image Uploaded",error:null})):k({success:!1,message:null,error:e.data.error}),u.push("/profile"),g(!1)})).catch((function(e){k({success:!1,message:null,error:"Something went wrong"}),g(!1)}))}()},positive:!0,labelPosition:"right",icon:"checkmark",content:"Upload"},E&&{loading:!0})),r.a.createElement("br",null),x&&C&&r.a.createElement(b.a,{positive:!0},r.a.createElement(b.a.Header,null,C)),!x&&I&&r.a.createElement(b.a,{negative:!0},r.a.createElement(b.a.Header,null,I))))},Ee=function(){var e=Object(n.useState)({ProfileImage:"",address:"",bio:"",coverImage:"",email:"",profileImage:"",username:"",_id:""}),a=Object(i.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(!1),s=Object(i.a)(c,2),o=s[0],m=s[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),E=p[0],g=p[1],f=Object(n.useState)(null),b=Object(i.a)(f,2),h=b[0],v=b[1],y=Object(n.useContext)(ee),O=y.contextState,S=y.setContext;return O.isLogged||u.push("/login"),Object(n.useEffect)((function(){m(!0),q(O.user.id).then((function(e){e.data.success&&l(e.data.data),m(!1)})).catch((function(e){401===e.response.data.statusCode&&function(){var e={contextState:{isLogged:!1,user:{id:"",role:""}},setContext:S};S(e),Object(n.useState)(e),u.push("/login")}(),m(!1)}))}),[]),r.a.createElement("div",{className:"profile-header-container"},o?r.a.createElement(re.a,{inverted:!0}):r.a.createElement("div",{className:"profile-header-cover",style:{backgroundImage:"url('".concat(E?R+"users/"+E:t.coverImage?R+"users/"+t.coverImage:"http://localhost:3010/users/default-cover.png","')")}},r.a.createElement(_.a,{columns:3,stackable:!0},r.a.createElement(_.a.Column,null,r.a.createElement(le.a,{closeIcon:!0,size:"fullscreen",trigger:r.a.createElement(ce.a,{as:"a"},r.a.createElement(se.a,{name:"photo"}))},r.a.createElement(le.a.Header,null,"Selectioner une photo de couverture"),r.a.createElement(pe,{handleUpload:function(e){return g(e)},coverImage:E?R+"users/"+E:t.coverImage?R+"users/"+t.coverImage:"http://localhost:3010/users/default-cover.png"}))),r.a.createElement(_.a.Column,null,r.a.createElement(le.a,{size:"tiny",trigger:r.a.createElement(ie.a,{className:"profile-photo",src:h?R+"users/"+h:t.profileImage?R+"users/"+t.profileImage:"http://localhost:3010/users/default-profile.png",size:"small",circular:!0,centered:!0})},r.a.createElement(le.a.Header,null,"Selectioner une photo de profil"),r.a.createElement(de,{handleUpload:function(e){return v(e)},profileImage:t.profileImage?R+"users/"+t.profileImage:"http://localhost:3010/users/default-profile.png"})),r.a.createElement(oe.a,null,r.a.createElement(_.a,null,r.a.createElement(_.a.Row,{centered:!0},r.a.createElement("div",{className:"profile-btn-controls"},r.a.createElement("span",{className:"profile-btn-controls-items"},"@"+t.username),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",{className:"profile-btn-controls-items"},t.bio?"Bio : "+t.bio:"Votre bio n'est pas encore d\xe9fini"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",{className:"profile-btn-controls-items"},r.a.createElement(se.a,{name:"map marker alternate",color:"grey"}),t.address?t.address:"Votre Adresse n'est pas encore d\xe9fini")))))),r.a.createElement(_.a.Column,null,r.a.createElement(oe.a,null,r.a.createElement(_.a,null,r.a.createElement(_.a.Row,{centered:!0},r.a.createElement("div",{className:"profile-btn-controls-btns"},r.a.createElement(le.a,{trigger:r.a.createElement("span",{className:"profile-btn-controls-items",style:{cursor:"pointer"}},"Edit Profile")},r.a.createElement(le.a.Header,null,"Editer le profil"),r.a.createElement(le.a.Content,null,r.a.createElement(le.a.Description,null,r.a.createElement(me,{profileState:t,handleProfileEdit:function(e){return l(e)}})))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",{className:"profile-btn-controls-items",style:{cursor:"pointer"}},r.a.createElement(se.a,{name:"share",color:"grey"}),"share")))))))))},ge=t(288),fe=t(673),be=function(){return r.a.createElement("div",null,r.a.createElement(oe.a,null,r.a.createElement(_.a,{stackable:!0,columns:2,centered:!0},r.a.createElement(_.a.Column,null,r.a.createElement(oe.a,{textAlign:"center"},r.a.createElement(ge.a,{raised:!0},r.a.createElement(ce.a,{color:"red",floating:!0},"22"),r.a.createElement(B.a,{as:"h2"},"Mon Journal"),r.a.createElement(ne.a,null),r.a.createElement("div",null,r.a.createElement(fe.a,{divided:!0,relaxed:!0},r.a.createElement(fe.a.Item,null,r.a.createElement(fe.a.Icon,{name:"pencil",size:"large",verticalAlign:"middle"}),r.a.createElement(fe.a.Content,null,r.a.createElement(fe.a.Header,{as:"a"},"Ecrir dans"))),r.a.createElement(fe.a.Item,null,r.a.createElement(fe.a.Icon,{name:"eye",size:"large",verticalAlign:"middle"}),r.a.createElement(fe.a.Content,null,r.a.createElement(fe.a.Header,{as:"a"},"Lire"))),r.a.createElement(fe.a.Item,null,r.a.createElement(fe.a.Icon,{name:"search",size:"large",verticalAlign:"middle"}),r.a.createElement(fe.a.Content,null,r.a.createElement(fe.a.Header,{as:"a"},"Chercher")))))))),r.a.createElement(_.a.Column,null,r.a.createElement(oe.a,{textAlign:"center"},r.a.createElement(ge.a,null,r.a.createElement(ce.a,{color:"blue",floating:!0},"3"),r.a.createElement(B.a,{as:"h2"},"Mes Commentaire"),r.a.createElement(ne.a,null),r.a.createElement("div",null,r.a.createElement(fe.a,{divided:!0,relaxed:!0},r.a.createElement(fe.a.Item,null,r.a.createElement(fe.a.Icon,{name:"eye",size:"large",verticalAlign:"middle"}),r.a.createElement(fe.a.Content,null,r.a.createElement(fe.a.Header,{as:"a"},"Lire")))))))))),r.a.createElement("div",{className:"msg-container"},r.a.createElement(b.a,{header:"Welcome back!",content:"This is a special notification which you can dismiss."}),r.a.createElement(b.a,{header:"Welcome back!",content:"This is a special notification which you can dismiss."}),r.a.createElement(b.a,{header:"Welcome back!",content:"This is a special notification which you can dismiss."})))},he=function(){return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(Ee,null),r.a.createElement(ne.a,null),r.a.createElement(be,null))},ve=t(675),ye=t(395),Oe=t(69),Se=t(628),we=function(e){var a=Object(n.useContext)(ee),t=(a.contextState,a.setContext),l=Object(n.useState)(1),c=Object(i.a)(l,2),s=c[0],o=c[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),p=d[0],E=d[1],g=r.a.useRef();return r.a.createElement("div",null,r.a.createElement(ve.a.Pushable,{as:ge.a.Group,raised:!0},r.a.createElement(ve.a,{as:ye.a,animation:"overlay",icon:"labeled",inverted:!0,vertical:!0,target:g,visible:p,width:"thin"},r.a.createElement(ye.a.Item,{as:"a"},"Menu Item 1"),r.a.createElement(ye.a.Item,{as:"a"},"Menu Item 2"),r.a.createElement(ye.a.Item,{as:"a"},"Menu Item 3"),r.a.createElement(ye.a.Item,{as:"a",onClick:function(){return function(){var e={contextState:{isLogged:!1,user:{id:"",role:""}},setContext:t};t(e),Y(e),u.push("/login")}()}},"Deconnexion")),r.a.createElement(Oe.a,{innerRef:g},r.a.createElement("div",null,r.a.createElement(ge.a,null,r.a.createElement(ye.a,{pointing:!0,secondary:!0,size:"small"},r.a.createElement(ye.a.Item,{as:"a",name:"home",active:1===s,onClick:function(){return o(1)}},r.a.createElement(se.a,{size:"big",name:"home"})),r.a.createElement(ye.a.Item,{as:"a",name:"user",active:2===s,onClick:function(){return o(2)}},r.a.createElement(se.a,{size:"big",name:"user circle"})),r.a.createElement(ye.a.Item,{as:"a",name:"messages",active:3===s,onClick:function(){return o(3)}},r.a.createElement(se.a,{size:"big",name:"copy outline"})),r.a.createElement(ye.a.Item,{as:"a",name:"notification",active:4===s,onClick:function(){return o(4)}},r.a.createElement(se.a,{size:"big",name:"mail outline"})),r.a.createElement(ye.a.Menu,{position:"right"},r.a.createElement(ye.a.Item,null,r.a.createElement(Se.a,{className:"icon",icon:"search",placeholder:"Search for a user..."})),r.a.createElement(ye.a.Item,{onClick:function(){return E(!p)}},r.a.createElement(se.a,{size:"big",name:"align justify"}))))),e.children))))},je=function(e){var a=e.children;return r.a.createElement("div",{className:"content-page"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"content-fluid"},r.a.createElement(we,null,a))))},xe=function(){return r.a.createElement(je,null,r.a.createElement(he,null))},Ce=t(407),Ie=t(409),ke=t(408),Ne=function(e){Object(Ie.a)(t,e);var a=Object(ke.a)(t);function t(){var e;Object(Ce.a)(this,t);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).render=function(){var a="";return e.props.isAuthenticated||(a=e.props.authenticationPath),a?n.createElement(o.b,Object.assign({},e.props,{component:function(){return n.createElement(o.a,{to:{pathname:a}})},render:void 0})):n.createElement(o.b,e.props)},e}return t}(o.b),ze=(t(623),function(){var e=Object(n.useContext)(ee),a=e.contextState,t=e.setContext;a.isLogged&&u.push("profile");var l=Object(n.useReducer)(V,{success:!1,error:"",message:""}),c=Object(i.a)(l,2),o=c[0],m=o.success,d=o.error,h=c[1],O=function(){var e=Object(E.a)(p.a.mark((function e(a,n){var r,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,l=n.resetForm,r(!0),h({type:"request"}),e.next=5,D(a).then((function(e){var a=Object(s.a)({},e.data);if(a.success){var n=a.data.user,r={contextState:{isLogged:a.success,user:{id:n._id,role:"admin"}},setContext:t};t(r),Y(r),h({type:"success",message:"Login success"}),u.push("/profile")}else h({type:"failure",error:a.error});l()})).catch((function(e){h({type:"failure",error:"Something went wrong"})}));case 5:r(!1),l();case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(y.c,{initialValues:{email:"",password:""},validationSchema:C,onSubmit:O},(function(e){var a=e.values,t=e.handleBlur,n=e.handleChange,l=e.handleSubmit,c=e.isSubmitting;return r.a.createElement(g.a,{onSubmit:l},r.a.createElement(f.a,{centered:!0,style:{width:450}},r.a.createElement(f.a.Content,{style:{margin:20}},r.a.createElement(f.a.Header,{style:{fontSize:22,padding:30}},"Connexion \xe0 Weigu"),!m&&d&&r.a.createElement(b.a,{negative:!0},r.a.createElement(b.a.Header,null,d)),r.a.createElement(f.a.Description,null,r.a.createElement("div",{className:"msg-error"}," ",r.a.createElement(y.a,{name:"email"})),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement("input",{type:"email",placeholder:"E-mail",onChange:n,onBlur:t,name:"email",value:a.email})),r.a.createElement("div",{className:"msg-error"}," ",r.a.createElement(y.a,{name:"password"})),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement("input",{type:"password",placeholder:"Mot de passe",onChange:n,onBlur:t,name:"password",value:a.password})))),r.a.createElement(f.a.Content,{extra:!0,style:{paddingLeft:40,paddingRight:40}},r.a.createElement(v.a,Object.assign({type:"submit",color:"teal",fluid:!0,size:"large"},c?{loading:!0}:{}),"Connexion"))))})),r.a.createElement(b.a,null,"Pas de compte ? ",r.a.createElement(N.a,{to:"/register"},"Rejoindre Weigu"),r.a.createElement("br",null),r.a.createElement(N.a,{to:"/"},"Mot de passe oubli\xe9 ?")))}),Le=function(){return r.a.createElement(J,null,r.a.createElement(ze,null))},Re=Object(o.f)((function(e){var a=Object(n.useContext)(ee),t=a.contextState,l=a.setContext;t.isLogged&&u.push("/profile");var c=Object(n.useState)(!1),o=Object(i.a)(c,2),m=o[0],d=o[1],p=Object(n.useReducer)(V,{success:!1,error:"",message:""}),E=Object(i.a)(p,2),g=E[0],h=g.success,v=g.error,y=E[1],O=Object(s.a)({},e.match.params);return Object(n.useEffect)((function(){d(!0),y({type:"request"}),F(O.token).then((function(e){if(e.data.success){y({type:"success",message:" Vous avez un token valide"}),console.log("after token verify"),console.log(e.data);var a={contextState:{isLogged:e.data.success,user:{id:e.data.id,role:"admin"}},setContext:l};l(a),Y(a),u.push("/profile")}else y({type:"failure",error:e.data.error});d(!1)})).catch((function(e){y({type:"failure",error:"something went wrong"}),d(!1)}))}),[O.token,l]),r.a.createElement("div",null,!h&&v&&r.a.createElement(b.a,{negative:!0},r.a.createElement(b.a.Header,null,v)),m&&r.a.createElement(re.a,{active:!0,content:"Verifiying link",style:{top:-20}}),r.a.createElement(f.a,{centered:!0,style:{width:450}},r.a.createElement(f.a.Content,{style:{margin:20}},r.a.createElement(f.a.Header,{style:{fontSize:22,padding:40}},"Connexion \xe0 Weigu"),r.a.createElement(f.a.Description,{style:{textAlign:"center"}},r.a.createElement("p",null,"Veuilliez patientez nous verifions votre lien magic")))))})),Pe=function(){return r.a.createElement(J,null,r.a.createElement(Re,null))},He=function(){var e=localStorage.getItem("Weigu-sate");return null!==e?JSON.parse(e):Z}(),Ue=function(){var e=Object(n.useState)(He),a=Object(i.a)(e,2),t=a[0],l=a[1],c={isAuthenticated:t.contextState.isLogged,authenticationPath:"/"};return r.a.createElement("div",null,r.a.createElement(ee.Provider,{value:Object(s.a)(Object(s.a)({},t),{},{setContext:l})},r.a.createElement(o.c,{history:u},r.a.createElement(o.b,{path:"/",exact:!0,component:function(){return r.a.createElement(o.a,{to:t.contextState.isLogged?"/profile":"/"})}}),r.a.createElement(o.b,{path:"/login",exact:!0,component:Le}),r.a.createElement(o.b,{path:"/login-link",exact:!0,component:te}),r.a.createElement(o.b,{path:"/mlink/:token",exact:!0,component:Pe}),r.a.createElement(Ne,Object.assign({},c,{exact:!0,path:"/profile",component:xe})),r.a.createElement(o.b,{path:"/register",exact:!0,component:K}),r.a.createElement(o.b,{path:"/login-link-text/:email",exact:!0,component:X}),r.a.createElement(o.b,{path:"/",exact:!0,component:$}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[424,1,2]]]);
//# sourceMappingURL=main.de39ad35.chunk.js.map