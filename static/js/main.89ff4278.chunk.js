(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{278:function(e,a,t){e.exports=t.p+"static/media/weigu-logo.246b4f4a.png"},426:function(e,a,t){e.exports=t(629)},625:function(e,a,t){e.exports=t.p+"static/media/giphyz.74356439.gif"},627:function(e,a,t){},629:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(108),c=t.n(l),i=t(32),s=t(20),o=t(175),m=t(70),u=Object(m.a)(),d=t(55),E=t.n(d),p=t(85),g=t(675),f=t(676),h=t(385),b=t(220),v=t(89),y=t(291),w=t(111),C=t(25),O=t(49),x=t(674),S=t(683);var j,k=O.f().email("Must be a valid email address").max(255,"Too long for an email").required("Email is required"),N=O.f().min(8,"Password must have at least 8 caracters").max(255,"Too long password").required("Password is required"),I=O.c().test("len","Confirmation code must be a 4 digits number",(function(e){return e&&4===e.toString().length})).positive("Confirmation code must be positive").required("Confirmation code is required"),F=O.f().min(3,"Username must have more than 3 caracters").max(50,"Username must have less than 50 caracters").required("Username is required"),L=O.a().oneOf([!0],"Must Accept Terms of Service"),z=O.d().shape({email:k,password:N}),A=O.d().shape({email:k}),P=(O.d().shape({confirmationCode:I}),O.d().shape({password1:N,password:O.f().oneOf([O.e("password1"),null],"Passwords must match")}),new Date),U=O.b().transform((function(e,a){return Object(x.a)(a)?a:Object(S.a)(a,"yyyy-MM-dd",new Date)})).max(P,"La date de naissance doit \xeatre inf\xe9rieure \xe0 celle d'aujourd'hui ").required("La date de naiassance est requis"),q=O.d().shape({terms:L,username:F,email:k,password:N,birthday:U}),R=t(374),H=t.n(R),T=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_ENV,"http://localhost:3010/"),D=H.a.create({withCredentials:!0,baseURL:T}),W={headers:{"Content-Type":"application/x-www-form-urlencoded"}},M=function(e){return D.post("users/upload",e)},V=function(e){var a=new URLSearchParams;return a.append("address",e.address),a.append("password",e.password),a.append("bio",e.bio),a.append("id",e.id||""),D.post("users/editProfile",a,W)},_=function(e){var a=new URLSearchParams;return a.append("token",e),D.post("users/linkVerify",a,W)},B=function(e){var a=new URLSearchParams;return a.append("email",e.email),D.post("users/linkSignin",a,W)},J=function(e){var a=new URLSearchParams;return a.append("userId",e),D.post("users/profile",a,W)},K=function(e){var a=new URLSearchParams;return a.append("email",e.email),a.append("password",e.password),D.post("users/signin",a,W)},G=function(e){var a=new URLSearchParams;return a.append("email",e.email),a.append("username",e.username),a.append("password",void 0===e.password?"":e.password),a.append("age",void 0===e.age?"0":e.age.toString()),D.post("users/signup",a)},$=function(e,a){switch(a.type){case"success":return{success:!0,message:a.message};case"failure":return{success:!1,error:a.error};default:return Object(i.a)({},e)}},Q=function(){var e=Object(n.useReducer)($,{success:!1,error:"",message:""}),a=Object(s.a)(e,2),t=a[0],l=t.success,c=t.message,o=t.error,m=a[1],u=function(){var e=Object(p.a)(E.a.mark((function e(a,t){var n,r,l,c,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.setSubmitting,r=t.resetForm,n(!0),m({type:"request"}),e.prev=3,l={email:a.email,password:a.password,username:a.username||""},e.next=7,G(l);case 7:c=e.sent,(s=Object(i.a)({},c.data)).success?m({type:"success",message:s.message}):m({type:"failure",error:s.error}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),m({type:"failure",error:"Something went wrong"});case 15:n(!1),r();case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(a,t){return e.apply(this,arguments)}}();return r.a.createElement(C.c,{initialValues:{email:"",password:"",username:"",terms:!1,birthday:"",genre:!0},validationSchema:q,onSubmit:u},(function(e){var a=e.values,t=e.handleSubmit,n=e.isSubmitting,i=e.errors,s=e.touched,m=e.setFieldValue;return r.a.createElement(g.a,{onSubmit:t},l&&c&&r.a.createElement(f.a,{style:{textAlign:"center"},positive:!0},r.a.createElement(f.a.Header,null,c)),!l&&o&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,o)),r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(g.a.Field,{width:"12"},i.username&&s.username?r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"username"})):r.a.createElement("label",null,"Nom d'utilisateur"),r.a.createElement(C.b,{type:"text",name:"username",placeholder:"Nom d'utilisateur"})),r.a.createElement(g.a.Field,{width:"12"},i.email&&s.email?r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"email"})):r.a.createElement("label",null,"Email"),r.a.createElement(C.b,{type:"email",name:"email",placeholder:"E-mail"})),r.a.createElement(g.a.Field,{width:"12"},i.password&&s.password?r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"password"})):r.a.createElement("label",null,"Mot de passe"),r.a.createElement(C.b,{type:"password",name:"password",placeholder:"Mot de passe"})),r.a.createElement(g.a.Field,{width:"12"},i.birthday&&s.birthday?r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"birthday"})):r.a.createElement("label",null,"Date de naissance"),r.a.createElement(C.b,{type:"date",name:"birthday",placeholder:"Date de naissance"})),r.a.createElement(g.a.Field,{width:"12"},i.genre&&s.genre?r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"genre"})):r.a.createElement("label",null,"Genre"),r.a.createElement(h.a,{columns:"equal"},r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(y.a,{radio:!0,label:"Homme",name:"gender",checked:a.genre,onClick:function(){return m("genre",!0)}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{radio:!0,label:"Femme",name:"gender",checked:!a.genre,onClick:function(){return m("genre",!1)}}))))),r.a.createElement(g.a.Field,{width:"12"},i.terms&&s.terms&&r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"terms"})),r.a.createElement(y.a,{type:"checkbox",label:"J'ai lu et j'accepte les conditions g\xe9n\xe9rales d'utilisation.",name:"terms",checked:a.terms,onClick:function(){return m("terms",!a.terms)}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g.a.Field,null,r.a.createElement(h.a,{centered:!0},r.a.createElement(w.a,Object.assign({fluid:!0,type:"submit",color:"black"},n?{loading:!0}:{}),"S'inscrire")))))}))},X=t(677),Y=function(e){var a=e.children;return r.a.createElement("div",null,r.a.createElement(h.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(h.a.Column,{style:{maxWidth:450}},r.a.createElement(X.a,{as:"h2",color:"teal",textAlign:"center"}),a)))},Z=function(){return r.a.createElement(Y,null,r.a.createElement(Q,null))},ee=function(){return r.a.createElement(Y,null)},ae=function(e){try{var a=JSON.stringify(e);localStorage.setItem("Weigu-sate",a)}catch(t){}},te={contextState:{isLogged:!1,user:{id:"",role:""}},setContext:function(){throw new Error("setContext function must be overridden")}},ne=Object(n.createContext)(te),re=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Nous vous avons envoy\xe9 un lien magique ! "),r.a.createElement("p",null,"Nous avons envoy\xe9 un e-mail \xe0 ",e.email),r.a.createElement("p",null,"Il contient un lien magique qui vous connectera \xe0 votre compte. "))},le=function(){var e=Object(n.useContext)(ne).contextState,a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],c=t[1];e.isLogged&&u.push("/profile");var o=Object(n.useReducer)($,{success:!1,error:"",message:""}),m=Object(s.a)(o,2),d=m[0],b=d.success,v=d.error,y=d.message,O=m[1],x=function(){var e=Object(p.a)(E.a.mark((function e(a,t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.setSubmitting)(!0),O({type:"request"}),e.next=5,B(a).then((function(e){var a=Object(i.a)({},e.data);a.success?(O({type:"success",message:"Email Sent success"}),c(!0)):O({type:"failure",error:a.error})})).catch((function(e){c(!1),O({type:"failure",error:"Something went wrong"})}));case 5:n(!1);case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();return r.a.createElement(C.c,{initialValues:{email:""},validationSchema:A,onSubmit:x},(function(e){var a=e.handleSubmit,t=e.isSubmitting,n=e.errors,c=e.touched,i=e.values;return r.a.createElement(g.a,{onSubmit:a},b&&y&&r.a.createElement(f.a,{style:{textAlign:"center"},positive:!0},r.a.createElement(f.a.Header,null,y)),!b&&v&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,v)),l?r.a.createElement(re,{email:i.email}):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Field,{width:"12"},n.email&&c.email?r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"email"})):r.a.createElement("label",null,"Email"),r.a.createElement(C.b,{type:"email",name:"email",placeholder:"E-mail"})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g.a.Field,null,r.a.createElement(h.a,{centered:!0},r.a.createElement(w.a,Object.assign({fluid:!0,type:"submit",color:"black"},t?{loading:!0}:{}),"Connexion")))))}))},ce=function(){return r.a.createElement(Y,null,r.a.createElement(le,null))},ie=t(678),se=t(681),oe=t(686),me=t(96),ue=t(42),de=t(140),Ee=t(679),pe=function(e){var a=e.handleProfileEdit,t=e.profileState,l=Object(n.useContext)(ne).contextState;l.isLogged||u.push("/login");var c=Object(n.useReducer)($,{success:!1,error:"",message:""}),o=Object(s.a)(c,2),m=o[0],d=m.success,h=m.error,b=m.message,v=o[1],y=function(){var e=Object(p.a)(E.a.mark((function e(n,r){var c,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.setSubmitting,s=r.resetForm,c(!0),v({type:"request"}),e.next=5,V(Object(i.a)(Object(i.a)({},n),{},{id:l.user.id})).then((function(e){var r=Object(i.a)({},e.data);r.success?(a(Object(i.a)(Object(i.a)({},t),n)),v({type:"success",message:"Vos information sont modifier"}),u.push("/profile")):v({type:"failure",error:r.error})})).catch((function(e){v({type:"failure",error:"Something went wrong"})}));case 5:c(!1),s();case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();return r.a.createElement(C.c,{initialValues:{address:t.address?t.address:"",bio:t.bio?t.bio:"",password:""},onSubmit:y},(function(e){var a=e.handleSubmit,t=e.isSubmitting;return r.a.createElement(g.a,{onSubmit:a,className:"edit-profile-form"},d&&b&&r.a.createElement(f.a,{style:{textAlign:"center"},positive:!0},r.a.createElement(f.a.Header,null,b)),!d&&h&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,h)),r.a.createElement(ie.a,{horizontal:!0},"Informations Personnelles"),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"address"})),r.a.createElement(C.b,{type:"text",placeholder:"Adresse",name:"address"})),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"bio"})),r.a.createElement(C.b,{type:"text",placeholder:"Bio",name:"bio"})),r.a.createElement(ie.a,{horizontal:!0},"Changer le mot de passe"),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"password"})),r.a.createElement(C.b,{type:"text",placeholder:"Mot de passe",name:"password"})),r.a.createElement(g.a.Field,{style:{padding:5}},r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"confirmPassword"})),r.a.createElement(C.b,{type:"text",placeholder:"Confirmer le mot de passe",name:"confirmPassword"})),r.a.createElement(w.a,{type:"submit",color:"teal",fluid:!0,size:"large",style:{marginTop:30}},t?"Loading...":"Enregistrer"))}))},ge=t(242),fe=function(e){var a=e.profileImage,t=e.handleUpload,l=Object(n.useContext)(ne).contextState,c=Object(n.useState)(null),i=Object(s.a)(c,2),o=i[0],m=i[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),E=d[0],p=d[1],g=Object(n.useState)(null),h=Object(s.a)(g,2),b=h[0],v=h[1],y=Object(n.useState)({success:!1,message:"",error:""}),C=Object(s.a)(y,2),O=C[0],x=O.success,S=O.message,j=O.error,k=C[1];return r.a.createElement(oe.a.Content,{image:!0},r.a.createElement(de.a,{wrapped:!0,size:"medium",src:o||(a||"http://localhost:3010/users/matthew-7e89.png"),centered:!0}),r.a.createElement(oe.a.Description,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ge.InputFile,{input:{id:"input-control-id",onChange:function(e){return function(e){var a;e.persist();var t=URL.createObjectURL(e.target.files&&e.target.files[0]);v((null===(a=e.target.files)||void 0===a?void 0:a[0])||null),m(t)}(e)}}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,Object.assign({disabled:null===o,onClick:function(){return function(){p(!0);var e=new FormData;b&&e.append("image",b),e.append("userId",l.user.id),e.append("type","profile"),M(e).then((function(e){e.data.success?(t(e.data.data.filename),k({success:!0,message:"Image Uploaded",error:null})):k({success:!1,message:null,error:e.data.error}),p(!1)})).catch((function(e){k({success:!1,message:null,error:"Something went wrong"}),p(!1)}))}()},positive:!0,labelPosition:"right",icon:"checkmark",content:"Upload"},E&&{loading:!0})),r.a.createElement("br",null),x&&S&&r.a.createElement(f.a,{style:{textAlign:"center"},positive:!0},r.a.createElement(f.a.Header,null,S)),!x&&j&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,j))))},he=function(e){var a=e.coverImage,t=e.handleUpload,l=Object(n.useContext)(ne).contextState,c=Object(n.useState)(null),i=Object(s.a)(c,2),o=i[0],m=i[1],d=Object(n.useState)(!1),E=Object(s.a)(d,2),p=E[0],g=E[1],h=Object(n.useState)(null),b=Object(s.a)(h,2),v=b[0],y=b[1],C=Object(n.useState)({success:!1,message:"",error:""}),O=Object(s.a)(C,2),x=O[0],S=x.success,j=x.message,k=x.error,N=O[1];return r.a.createElement(oe.a.Content,{image:!0},r.a.createElement(de.a,{wrapped:!0,size:"large",src:o||(a||"./images/cover.png"),centered:!0}),r.a.createElement(oe.a.Description,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ge.InputFile,{input:{id:"input-control-id",onChange:function(e){return function(e){var a;e.persist();var t=URL.createObjectURL(e.target.files&&e.target.files[0]);y((null===(a=e.target.files)||void 0===a?void 0:a[0])||null),m(t)}(e)}}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,Object.assign({disabled:null===o,onClick:function(){return function(){g(!0);var e=new FormData;v&&e.append("image",v),e.append("userId",l.user.id),e.append("type","cover"),M(e).then((function(e){e.data.success?(t(e.data.data.filename),N({success:!0,message:"Image Uploaded",error:null})):N({success:!1,message:null,error:e.data.error}),u.push("/profile"),g(!1)})).catch((function(e){N({success:!1,message:null,error:"Something went wrong"}),g(!1)}))}()},positive:!0,labelPosition:"right",icon:"checkmark",content:"Upload"},p&&{loading:!0})),r.a.createElement("br",null),S&&j&&r.a.createElement(f.a,{style:{textAlign:"center"},positive:!0},r.a.createElement(f.a.Header,null,j)),!S&&k&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,k))))},be=function(){var e=Object(n.useState)({ProfileImage:"",address:"",bio:"",coverImage:"",email:"",profileImage:"",username:"",_id:""}),a=Object(s.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(!1),i=Object(s.a)(c,2),o=i[0],m=i[1],d=Object(n.useState)(null),E=Object(s.a)(d,2),p=E[0],g=E[1],f=Object(n.useState)(null),b=Object(s.a)(f,2),v=b[0],y=b[1],w=Object(n.useContext)(ne),C=w.contextState,O=w.setContext;return C.isLogged||u.push("/"),Object(n.useEffect)((function(){m(!0),J(C.user.id).then((function(e){e.data.success&&l(e.data.data),m(!1)})).catch((function(e){401===e.response.data.statusCode&&function(){var e={contextState:{isLogged:!1,user:{id:"",role:""}},setContext:O};O(e),Object(n.useState)(e),u.push("/")}(),m(!1)}))}),[]),r.a.createElement("div",{className:"profile-header-container"},o?r.a.createElement(se.a,{inverted:!0}):r.a.createElement("div",{className:"profile-header-cover",style:{backgroundImage:"url('".concat(p?T+"users/"+p:t.coverImage?T+"users/"+t.coverImage:"http://localhost:3010/users/default-cover.png","')")}},r.a.createElement(h.a,{columns:3,stackable:!0},r.a.createElement(h.a.Column,null,r.a.createElement(oe.a,{closeIcon:!0,size:"fullscreen",trigger:r.a.createElement(me.a,{as:"a"},r.a.createElement(ue.a,{name:"photo"}))},r.a.createElement(oe.a.Header,null,"Selectioner une photo de couverture"),r.a.createElement(he,{handleUpload:function(e){return g(e)},coverImage:p?T+"users/"+p:t.coverImage?T+"users/"+t.coverImage:"http://localhost:3010/users/default-cover.png"}))),r.a.createElement(h.a.Column,null,r.a.createElement(oe.a,{size:"tiny",trigger:r.a.createElement(de.a,{className:"profile-photo",src:v?T+"users/"+v:t.profileImage?T+"users/"+t.profileImage:"http://localhost:3010/users/default-profile.png",size:"small",circular:!0,centered:!0})},r.a.createElement(oe.a.Header,null,"Selectioner une photo de profil"),r.a.createElement(fe,{handleUpload:function(e){return y(e)},profileImage:t.profileImage?T+"users/"+t.profileImage:"http://localhost:3010/users/default-profile.png"})),r.a.createElement(Ee.a,null,r.a.createElement(h.a,null,r.a.createElement(h.a.Row,{centered:!0},r.a.createElement("div",{className:"profile-btn-controls"},r.a.createElement("span",{className:"profile-btn-controls-items"},"@"+t.username),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",{className:"profile-btn-controls-items"},t.bio?"Bio : "+t.bio:"Votre bio n'est pas encore d\xe9fini"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",{className:"profile-btn-controls-items"},r.a.createElement(ue.a,{name:"map marker alternate",color:"grey"}),t.address?t.address:"Votre Adresse n'est pas encore d\xe9fini")))))),r.a.createElement(h.a.Column,null,r.a.createElement(Ee.a,null,r.a.createElement(h.a,null,r.a.createElement(h.a.Row,{centered:!0},r.a.createElement("div",{className:"profile-btn-controls-btns"},r.a.createElement(oe.a,{trigger:r.a.createElement("span",{className:"profile-btn-controls-items",style:{cursor:"pointer"}},"Edit Profile")},r.a.createElement(oe.a.Header,null,"Editer le profil"),r.a.createElement(oe.a.Content,null,r.a.createElement(oe.a.Description,null,r.a.createElement(pe,{profileState:t,handleProfileEdit:function(e){return l(e)}})))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",{className:"profile-btn-controls-items",style:{cursor:"pointer"}},r.a.createElement(ue.a,{name:"share",color:"grey"}),"share")))))))))},ve=t(287),ye=t(680),we=function(){return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(h.a,{stackable:!0,columns:2,centered:!0},r.a.createElement(h.a.Column,null,r.a.createElement(Ee.a,{textAlign:"center"},r.a.createElement(ve.a,{raised:!0},r.a.createElement(me.a,{color:"red",floating:!0},"22"),r.a.createElement(X.a,{as:"h2"},"Mon Journal"),r.a.createElement(ie.a,null),r.a.createElement("div",null,r.a.createElement(ye.a,{divided:!0,relaxed:!0},r.a.createElement(ye.a.Item,null,r.a.createElement(ye.a.Icon,{name:"pencil",size:"large",verticalAlign:"middle"}),r.a.createElement(ye.a.Content,null,r.a.createElement(ye.a.Header,{as:"a"},"Ecrir dans"))),r.a.createElement(ye.a.Item,null,r.a.createElement(ye.a.Icon,{name:"eye",size:"large",verticalAlign:"middle"}),r.a.createElement(ye.a.Content,null,r.a.createElement(ye.a.Header,{as:"a"},"Lire"))),r.a.createElement(ye.a.Item,null,r.a.createElement(ye.a.Icon,{name:"search",size:"large",verticalAlign:"middle"}),r.a.createElement(ye.a.Content,null,r.a.createElement(ye.a.Header,{as:"a"},"Chercher")))))))),r.a.createElement(h.a.Column,null,r.a.createElement(Ee.a,{textAlign:"center"},r.a.createElement(ve.a,null,r.a.createElement(me.a,{color:"blue",floating:!0},"3"),r.a.createElement(X.a,{as:"h2"},"Mes Commentaire"),r.a.createElement(ie.a,null),r.a.createElement("div",null,r.a.createElement(ye.a,{divided:!0,relaxed:!0},r.a.createElement(ye.a.Item,null,r.a.createElement(ye.a.Icon,{name:"eye",size:"large",verticalAlign:"middle"}),r.a.createElement(ye.a.Content,null,r.a.createElement(ye.a.Header,{as:"a"},"Lire")))))))))),r.a.createElement("div",{className:"msg-container"},r.a.createElement(f.a,{header:"Welcome back!",content:"This is a special notification which you can dismiss."}),r.a.createElement(f.a,{header:"Welcome back!",content:"This is a special notification which you can dismiss."}),r.a.createElement(f.a,{header:"Welcome back!",content:"This is a special notification which you can dismiss."})))},Ce=function(){return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(be,null),r.a.createElement(ie.a,null),r.a.createElement(we,null))},Oe=t(682),xe=t(395),Se=t(687),je=t(633),ke=(t(624),function(e){var a=e.handleClick;return r.a.createElement(g.a,null,r.a.createElement(g.a.Field,null,r.a.createElement(w.a,{type:"button",className:"signUp",color:"blue"},r.a.createElement(ue.a,{name:"facebook",size:"large"}),"Se connecter avec Facebook")),r.a.createElement(g.a.Field,null,r.a.createElement(w.a,{type:"button",className:"signUp",color:"red"},r.a.createElement(ue.a,{name:"google",size:"large"}),"Se connecter avec Google")),r.a.createElement(g.a.Field,null,r.a.createElement("p",{className:"dataField"},"Ou")),r.a.createElement(g.a.Field,null,r.a.createElement(w.a,{type:"button",className:"signUp",color:"black",onClick:function(){return a("login")}},"Se connecter avec un e-mail")),r.a.createElement(g.a.Field,null,r.a.createElement(w.a,{type:"button",className:"signUp",color:"green",onClick:function(){return a("magiclink")}},"Se connecter avec un lien magic",r.a.createElement(de.a,{src:t(625),alt:"gif",className:"magic"}))))}),Ne=function(){var e=Object(n.useContext)(ne),a=e.contextState,t=e.setContext;a.isLogged&&u.push("profile");var l=Object(n.useReducer)($,{success:!1,error:"",message:""}),c=Object(s.a)(l,2),o=c[0],m=o.success,d=o.error,b=c[1],v=function(){var e=Object(p.a)(E.a.mark((function e(a,n){var r,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,l=n.resetForm,r(!0),b({type:"request"}),e.next=5,K(a).then((function(e){var a=Object(i.a)({},e.data);if(a.success){var n=a.data.user,r={contextState:{isLogged:a.success,user:{id:n._id,role:"admin"}},setContext:t};t(r),ae(r),b({type:"success",message:"Login success"}),u.push("/profile")}else b({type:"failure",error:a.error});l()})).catch((function(e){b({type:"failure",error:"Something went wrong"})}));case 5:r(!1),l();case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();return r.a.createElement(C.c,{initialValues:{email:"",password:""},validationSchema:z,onSubmit:v},(function(e){e.values,e.handleBlur,e.handleChange;var a=e.handleSubmit,t=e.isSubmitting,n=e.errors,l=e.touched;return r.a.createElement(g.a,{onSubmit:a},!m&&d&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,d)),r.a.createElement(g.a.Field,{width:"12"},n.email&&l.email?r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"email"})):r.a.createElement("label",null,"Email"),r.a.createElement(C.b,{type:"email",name:"email",placeholder:"E-mail"})),r.a.createElement(g.a.Field,{width:"12"},n.password&&l.password?r.a.createElement("div",{className:"msg-error"},r.a.createElement(C.a,{name:"password"})):r.a.createElement("label",null,"Mot de passe"),r.a.createElement(C.b,{type:"password",name:"password",placeholder:"Mot de passe"})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g.a.Field,null,r.a.createElement(h.a,{centered:!0},r.a.createElement(w.a,Object.assign({fluid:!0,type:"submit",color:"black"},t?{loading:!0}:{}),"Connexion"))))}))},Ie=function(e){var a=e.handleClick;return r.a.createElement("div",{className:"footerModal"},r.a.createElement("p",{className:"headfooter"},r.a.createElement("a",{className:"pointer spe",onClick:function(){return a("pwdForgotten")}},"Mot de passe oubli\xe9 ?")),r.a.createElement("p",{className:"secheadfooter"},"Pas encore inscrit ?"," ",r.a.createElement("a",{className:"pointer",onClick:function(){return a("register")}},"Je m'inscris")))},Fe=function(e){var a=e.handleClick;return r.a.createElement("div",{className:"footerModal"},r.a.createElement("p",{className:"headfooter"},"D\xe9ja inscrit?"," ",r.a.createElement("a",{className:"pointer",onClick:function(){return a("login")}},"Je me connecte")),r.a.createElement("p",{className:"secheadfooter"},"En vous inscrivant, vous indiquez que vous acceptez les"," ",r.a.createElement("a",{href:"#"},"Conditions d'utilisation")," et la"," ",r.a.createElement("a",{href:"#"},"Politique de confidentialit\xe9")," de Weigu."))},Le=function(e){var a=e.page,t=e.handleClick;switch(a){case"login":return r.a.createElement(Ie,{handleClick:t});case"register":return r.a.createElement(Fe,{handleClick:t});case"magiclink":default:return r.a.createElement(Ie,{handleClick:t})}},ze=function(e){var a=e.page,t=e.handleClick;switch(a){case"login":return r.a.createElement(Ne,null);case"register":return r.a.createElement(Q,null);case"magiclink":return r.a.createElement(le,null);default:return r.a.createElement(ke,{handleClick:t})}},Ae=function(e){var a=Object(n.useState)(e.page),l=Object(s.a)(a,2),c=l[0],i=l[1],o=function(e){console.log(e),i(e)};return r.a.createElement(oe.a,{className:"tiny",trigger:e.trigger,centered:!1,onClose:function(){return i("")}},r.a.createElement(oe.a.Header,null,r.a.createElement(de.a,{src:t(278),size:"tiny"}),r.a.createElement("div",{className:"headerText"},"Lorem ipsum dolor sit amet, consectetur adipiscing.")),r.a.createElement(oe.a.Content,null,r.a.createElement(oe.a.Description,null,r.a.createElement(ze,{page:c,handleClick:o}))),r.a.createElement(Le,{page:c,handleClick:o}))},Pe=function(e){var a=Object(n.useContext)(ne),l=a.contextState,c=a.setContext,i=Object(n.useState)(1),o=Object(s.a)(i,2),m=(o[0],o[1]),d=Object(n.useState)(!1),E=Object(s.a)(d,2),p=E[0],g=E[1],f=(r.a.useRef(),function(){var e={contextState:{isLogged:!1,user:{id:"",role:""}},setContext:c};c(e),ae(e),u.push("/")});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{as:xe.a,animation:"overlay",icon:"labeled",inverted:!0,onHide:function(){return g(!1)},vertical:!0,visible:p,width:"thin"},r.a.createElement(xe.a.Item,{link:!0,as:"a",content:"C'est quoi Weigu ?",className:"redlocation",onClick:function(){return m(1)}}),l.isLogged?r.a.createElement("a",{onClick:function(){return f()},className:"link item ins"},"Deconnexion"):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{page:"",trigger:r.a.createElement("a",{href:"#",className:"link item con"},"Connecter")}),r.a.createElement(Ae,{page:"register",trigger:r.a.createElement("a",{href:"#",className:"link item ins"},"Inscription")}))),r.a.createElement(Se.a,Object.assign({as:ve.a},Se.a.onlyMobile,{style:{margin:0}}),r.a.createElement(Oe.a.Pusher,null,r.a.createElement(h.a,null,r.a.createElement(b.a,{textAlign:"center",columns:"equal",style:{marginLeft:"10px",marginRight:"10px"}},r.a.createElement(de.a,{src:t(278),size:"tiny"}),r.a.createElement(v.a,{verticalAlign:"middle",width:10},r.a.createElement(je.a,{fluid:!0,icon:{name:"search",circular:!0,link:!0},placeholder:"Search..."})),r.a.createElement(v.a,{verticalAlign:"middle"},r.a.createElement(ue.a,{size:"big",name:"align justify",onClick:function(){return g(!p)}})))))),r.a.createElement(Se.a,{as:ve.a,minWidth:Se.a.onlyTablet.minWidth,style:{margin:0}},r.a.createElement(xe.a,{stackable:!0,pointing:!0,secondary:!0,size:"small"},r.a.createElement(xe.a.Item,null,r.a.createElement(de.a,{src:t(278),size:"tiny"})),r.a.createElement(xe.a.Item,null,r.a.createElement(je.a,{icon:{name:"search",circular:!0,link:!0},placeholder:"Search..."})),r.a.createElement(xe.a.Menu,{position:"right"},r.a.createElement(xe.a.Item,{link:!0,as:"a",content:"C'est quoi Weigu ?",className:"redlocation",onClick:function(){return m(1)}}),l.isLogged?r.a.createElement("a",{onClick:function(){return f()},className:"link item ins"},"Deconnexion"):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{page:"",trigger:r.a.createElement("a",{href:"#",className:"link item con"},"Connecter")}),r.a.createElement(Ae,{page:"register",trigger:r.a.createElement("a",{href:"#",className:"link item ins"},"Inscription")}))))))},Ue=function(e){var a=e.children;return r.a.createElement("div",{className:"content-page"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"content-fluid"},r.a.createElement("div",{className:"contenu"}),r.a.createElement(Pe,null),r.a.createElement("div",{style:{marginTop:"10px"}},a)),r.a.createElement(ve.a,{vertical:!0,style:{margin:"1em 0em 0em 0em",padding:"1em 0em",color:"black",backgroundColor:"white"}},r.a.createElement(Ee.a,{textAlign:"center"},r.a.createElement(ye.a,{horizontal:!0,divided:!0,link:!0,size:"small"},r.a.createElement(ye.a.Item,{as:"a",href:"#"},"Site Map"),r.a.createElement(ye.a.Item,{as:"a",href:"#"},"Contact Us"),r.a.createElement(ye.a.Item,{as:"a",href:"#"},"Terms and Conditions"),r.a.createElement(ye.a.Item,{as:"a",href:"#"},"Privacy Policy"))))))},qe=function(){return r.a.createElement(Ue,null,r.a.createElement(Ce,null))};!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Top=2]="Top",e[e.Bottom=3]="Bottom"}(j||(j={}));var Re=function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=(t[0],t[1],Object(n.useState)("left")),c=Object(s.a)(l,2),i=(c[0],c[1],Object(n.useState)("push")),o=Object(s.a)(i,2);o[0],o[1];return r.a.createElement("div",{style:{height:"100vh"}})},He=function(){return r.a.createElement(Ue,null,r.a.createElement(Re,null))},Te=t(407),De=t(410),We=t(409),Me=function(e){Object(De.a)(t,e);var a=Object(We.a)(t);function t(){var e;Object(Te.a)(this,t);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).render=function(){var a="";return e.props.isAuthenticated||(a=e.props.authenticationPath),a?n.createElement(o.b,Object.assign({},e.props,{component:function(){return n.createElement(o.a,{to:{pathname:a}})},render:void 0})):n.createElement(o.b,e.props)},e}return t}(o.b),Ve=(t(627),function(){return r.a.createElement(Y,null,r.a.createElement(Ne,null))}),_e=t(230),Be=Object(o.d)((function(e){var a=Object(n.useContext)(ne),t=a.contextState,l=a.setContext;t.isLogged&&u.push("/profile");var c=Object(n.useState)(!1),o=Object(s.a)(c,2),m=o[0],d=o[1],E=Object(n.useReducer)($,{success:!1,error:"",message:""}),p=Object(s.a)(E,2),g=p[0],h=g.success,b=g.error,v=p[1],y=Object(i.a)({},e.match.params);return Object(n.useEffect)((function(){d(!0),v({type:"request"}),_(y.token).then((function(e){if(e.data.success){v({type:"success",message:" Vous avez un token valide"}),console.log("after token verify"),console.log(e.data);var a={contextState:{isLogged:e.data.success,user:{id:e.data.id,role:"admin"}},setContext:l};l(a),ae(a),u.push("/profile")}else v({type:"failure",error:e.data.error});d(!1)})).catch((function(e){v({type:"failure",error:"something went wrong"}),d(!1)}))}),[y.token,l]),r.a.createElement("div",null,!h&&b&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,b)),m&&r.a.createElement(se.a,{active:!0,content:"Verifiying link",style:{top:-20}}),r.a.createElement(_e.a,{centered:!0,style:{width:450}},r.a.createElement(_e.a.Content,{style:{margin:20}},r.a.createElement(_e.a.Header,{style:{fontSize:22,padding:40}},"Connexion \xe0 Weigu"),r.a.createElement(_e.a.Description,{style:{textAlign:"center"}},r.a.createElement("p",null,"Veuilliez patientez nous verifions votre lien magic")))))})),Je=function(){return r.a.createElement(Y,null,r.a.createElement(Be,null))},Ke=function(){return r.a.createElement("div",{style:{fontSize:"12px"}},r.a.createElement(_e.a,{fluid:!0},r.a.createElement(_e.a.Content,null,r.a.createElement("div",{className:"privacy"},"Public ",r.a.createElement(ue.a,{name:"unlock",size:"large"})),r.a.createElement(_e.a.Header,null,r.a.createElement(de.a,{avatar:!0,size:"medium",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),"Steve Sanders ",r.a.createElement(ue.a,{name:"point",size:"small",color:"red",className:"redlocation"}," paris (79)")),r.a.createElement(_e.a.Meta,null,"Extrait du journal. 24 juin 2020"),r.a.createElement(_e.a.Description,null,"At every tiled on ye defer do. No attention suspected oh difficult. Fond his say old meet cold find come whom. The sir park sake bred. Wonder matter now can estate esteem assure fat roused. Am performed on existence as discourse is. Pleasure friendly at marriage blessing or.")),r.a.createElement(_e.a.Content,{extra:!0},r.a.createElement(ue.a,{name:"comment",size:"small"}," 314"),r.a.createElement(ue.a,{name:"heartbeat",size:"small"}," Fast")," - ",r.a.createElement("strong",{className:"heart"},"JUICE WLRD")," (+2)",r.a.createElement(ue.a,{name:"ellipsis horizontal",size:"large"}))))},Ge=t(408),$e=t.n(Ge),Qe=(t(628),[{title:"First item",description:"Lorem ipsum dolor sit amet, consectetur adipiscing"},{title:"Second item",description:"incididunt ut labore et dolore magna aliqua"},{title:"Third item",description:"Praesent commodo cursus magna, vel scelerisque nisl consectetur."},{title:"Fourth item",description:"Duis aute irure dolor in reprehenderit in"}]),Xe=function(){return r.a.createElement("div",null,r.a.createElement($e.a,{autoplay:2e3,infinite:!0,nextButton:r.a.createElement(ue.a,{name:"arrow circle right"}),previousButton:r.a.createElement(ue.a,{name:"arrow circle left"})},Qe.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("div",{className:"textSlider"},e.description))}))))},Ye=function(){return r.a.createElement("div",{className:"containerback"},r.a.createElement(h.a,{stackable:!0,columns:"equal"},r.a.createElement(h.a.Row,{centered:!0},r.a.createElement(h.a.Column,{width:5},r.a.createElement(Xe,null),r.a.createElement("div",{className:"buttons"},r.a.createElement(Ae,{page:"register",trigger:r.a.createElement(w.a,{size:"large",color:"red",className:"signup"},"Commencer")}),r.a.createElement(Ae,{page:"",trigger:r.a.createElement(w.a,{size:"large",style:{backgroundColor:"white",color:"black"},className:"signin"},"Se connecter")}))),r.a.createElement(h.a.Column,{width:10,style:{marginRight:"10px"}},r.a.createElement(h.a,{stackable:!0,columns:2},r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)),r.a.createElement(h.a.Column,null,r.a.createElement(Ke,null)))))))},Ze=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,null,r.a.createElement(Ye,null)))},ea=function(){var e=localStorage.getItem("Weigu-sate");return null!==e?JSON.parse(e):te}(),aa=function(){var e=Object(n.useState)(ea),a=Object(s.a)(e,2),t=a[0],l=a[1],c={isAuthenticated:t.contextState.isLogged,authenticationPath:"/"};return r.a.createElement("div",null,r.a.createElement(ne.Provider,{value:Object(i.a)(Object(i.a)({},t),{},{setContext:l})},r.a.createElement(o.c,{history:u},r.a.createElement(o.b,{path:"/",exact:!0,component:function(){return r.a.createElement(o.a,{to:t.contextState.isLogged?"/profile":"/"})}}),r.a.createElement(o.b,{path:"/profil",exact:!0,component:He}),r.a.createElement(o.b,{path:"/login",exact:!0,component:Ve}),r.a.createElement(o.b,{path:"/login-link",exact:!0,component:ce}),r.a.createElement(o.b,{path:"/mlink/:token",exact:!0,component:Je}),r.a.createElement(Me,Object.assign({},c,{exact:!0,path:"/profile",component:qe})),r.a.createElement(o.b,{path:"/register",exact:!0,component:Z}),r.a.createElement(o.b,{path:"/login-link-text/:email",exact:!0,component:ee}),r.a.createElement(o.b,{path:"/",exact:!0,component:Ze}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(aa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[426,1,2]]]);
//# sourceMappingURL=main.89ff4278.chunk.js.map