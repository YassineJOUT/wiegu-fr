(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{204:function(e,t,a){e.exports=a.p+"static/media/weigu-logo.246b4f4a.png"},374:function(e,t,a){e.exports=a.p+"static/media/giphyz.74356439.gif"},433:function(e,t,a){e.exports=a(633)},632:function(e,t,a){},633:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(108),c=a.n(l),i=a(41),s=a(20),o=a(177),m=a(70),u=Object(m.a)(),d=a(55),E=a.n(d),g=a(85),p=a(679),f=a(680),b=a(389),h=a(223),v=a(89),y=a(294),C=a(111),w=a(27),x=a(49),S=a(678),k=a(688);var O=x.f().email("Must be a valid email address").max(255,"Too long for an email").required("Email is required"),j=x.f().min(8,"Password must have at least 8 caracters").max(255,"Too long password").required("Password is required"),N=x.c().test("len","Confirmation code must be a 4 digits number",(function(e){return e&&4===e.toString().length})).positive("Confirmation code must be positive").required("Confirmation code is required"),I=x.f().min(3,"Username must have more than 3 caracters").max(50,"Username must have less than 50 caracters").required("Username is required"),F=x.a().oneOf([!0],"Must Accept Terms of Service"),z=x.d().shape({email:O,password:j}),L=x.d().shape({email:O}),P=(x.d().shape({confirmationCode:N}),x.d().shape({password1:j,password:x.f().oneOf([x.e("password1"),null],"Passwords must match")}),new Date),R=x.b().transform((function(e,t){return Object(S.a)(t)?t:Object(k.a)(t,"yyyy-MM-dd",new Date)})).max(P,"La date de naissance doit \xeatre inf\xe9rieure \xe0 celle d'aujourd'hui ").required("La date de naiassance est requis"),A=x.d().shape({terms:F,username:I,email:O,password:j,birthday:R}),T=a(378),q=a.n(T),M=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_ENV,"https://weigu-api.yj-dev.com/"),U=q.a.create({withCredentials:!0,baseURL:M}),H={headers:{"Content-Type":"application/x-www-form-urlencoded"}},D=function(e){return U.post("users/upload",e)},W=function(e){var t=new URLSearchParams;return t.append("token",e),U.post("users/linkVerify",t,H)},V=function(e){var t=new URLSearchParams;return t.append("email",e.email),U.post("users/linkSignin",t,H)},_=function(e){var t=new URLSearchParams;return t.append("userId",e),U.post("users/profile",t,H)},J=function(e){var t=new URLSearchParams;return t.append("email",e.email),t.append("password",e.password),U.post("users/signin",t,H)},B=function(e){var t=new URLSearchParams;return t.append("email",e.email),t.append("username",e.username),t.append("password",void 0===e.password?"":e.password),t.append("age",void 0===e.age?"0":e.age.toString()),U.post("users/signup",t)},G=function(e,t){switch(t.type){case"success":return{success:!0,message:t.message};case"failure":return{success:!1,error:t.error};default:return Object(i.a)({},e)}},K=function(){var e=Object(n.useReducer)(G,{success:!1,error:"",message:""}),t=Object(s.a)(e,2),a=t[0],l=a.success,c=a.message,o=a.error,m=t[1],u=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n,r,l,c,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,r=a.resetForm,n(!0),m({type:"request"}),e.prev=3,l={email:t.email,password:t.password,username:t.username||""},e.next=7,B(l);case 7:c=e.sent,(s=Object(i.a)({},c.data)).success?m({type:"success",message:s.message}):m({type:"failure",error:s.error}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),m({type:"failure",error:"Something went wrong"});case 15:n(!1),r();case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(w.c,{initialValues:{email:"",password:"",username:"",terms:!1,birthday:"",genre:!0},validationSchema:A,onSubmit:u},(function(e){var t=e.values,a=e.handleSubmit,n=e.isSubmitting,i=e.errors,s=e.touched,m=e.setFieldValue;return r.a.createElement(p.a,{onSubmit:a},l&&c&&r.a.createElement(f.a,{style:{textAlign:"center"},positive:!0},r.a.createElement(f.a.Header,null,c)),!l&&o&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,o)),r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(p.a.Field,{width:"12"},i.username&&s.username?r.a.createElement("div",{className:"msg-error"},r.a.createElement(w.a,{name:"username"})):r.a.createElement("label",null,"Nom d'utilisateur"),r.a.createElement(w.b,{type:"text",name:"username",placeholder:"Nom d'utilisateur"})),r.a.createElement(p.a.Field,{width:"12"},i.email&&s.email?r.a.createElement("div",{className:"msg-error"},r.a.createElement(w.a,{name:"email"})):r.a.createElement("label",null,"Email"),r.a.createElement(w.b,{type:"email",name:"email",placeholder:"E-mail"})),r.a.createElement(p.a.Field,{width:"12"},i.password&&s.password?r.a.createElement("div",{className:"msg-error"},r.a.createElement(w.a,{name:"password"})):r.a.createElement("label",null,"Mot de passe"),r.a.createElement(w.b,{type:"password",name:"password",placeholder:"Mot de passe"})),r.a.createElement(p.a.Field,{width:"12"},i.birthday&&s.birthday?r.a.createElement("div",{className:"msg-error"},r.a.createElement(w.a,{name:"birthday"})):r.a.createElement("label",null,"Date de naissance"),r.a.createElement(w.b,{type:"date",name:"birthday",placeholder:"Date de naissance"})),r.a.createElement(p.a.Field,{width:"12"},i.genre&&s.genre?r.a.createElement("div",{className:"msg-error"},r.a.createElement(w.a,{name:"genre"})):r.a.createElement("label",null,"Genre"),r.a.createElement(b.a,{columns:"equal"},r.a.createElement(h.a,null,r.a.createElement(v.a,null,r.a.createElement(y.a,{radio:!0,label:"Homme",name:"gender",checked:t.genre,onClick:function(){return m("genre",!0)}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{radio:!0,label:"Femme",name:"gender",checked:!t.genre,onClick:function(){return m("genre",!1)}}))))),r.a.createElement(p.a.Field,{width:"12"},i.terms&&s.terms&&r.a.createElement("div",{className:"msg-error"},r.a.createElement(w.a,{name:"terms"})),r.a.createElement(y.a,{type:"checkbox",label:"J'ai lu et j'accepte les conditions g\xe9n\xe9rales d'utilisation.",name:"terms",checked:t.terms,onClick:function(){return m("terms",!t.terms)}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(p.a.Field,null,r.a.createElement(b.a,{centered:!0},r.a.createElement(C.a,Object.assign({fluid:!0,type:"submit",color:"black"},n?{loading:!0}:{}),"S'inscrire")))))}))},X=a(681),$=function(e){var t=e.children;return r.a.createElement("div",null,r.a.createElement(b.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(b.a.Column,{style:{maxWidth:450}},r.a.createElement(X.a,{as:"h2",color:"teal",textAlign:"center"}),t)))},Q=function(){return r.a.createElement($,null,r.a.createElement(K,null))},Y=function(){return r.a.createElement($,null)},Z=function(e){try{var t=JSON.stringify(e);localStorage.setItem("Weigu-sate",t)}catch(a){}},ee={contextState:{isLogged:!1,user:{id:"",role:""}},setContext:function(){throw new Error("setContext function must be overridden")}},te=Object(n.createContext)(ee),ae=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Nous vous avons envoy\xe9 un lien magique ! "),r.a.createElement("p",null,"Nous avons envoy\xe9 un e-mail \xe0 ",e.email),r.a.createElement("p",null,"Il contient un lien magique qui vous connectera \xe0 votre compte. "))},ne=function(){var e=Object(n.useContext)(te).contextState,t=Object(n.useState)(!1),a=Object(s.a)(t,2),l=a[0],c=a[1];e.isLogged&&u.push("/profile");var o=Object(n.useReducer)(G,{success:!1,error:"",message:""}),m=Object(s.a)(o,2),d=m[0],h=d.success,v=d.error,y=d.message,x=m[1],S=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.setSubmitting)(!0),x({type:"request"}),e.next=5,V(t).then((function(e){var t=Object(i.a)({},e.data);t.success?(x({type:"success",message:"Email Sent success"}),c(!0)):x({type:"failure",error:t.error})})).catch((function(e){c(!1),x({type:"failure",error:"Something went wrong"})}));case 5:n(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(w.c,{initialValues:{email:""},validationSchema:L,onSubmit:S},(function(e){var t=e.handleSubmit,a=e.isSubmitting,n=e.errors,c=e.touched,i=e.values;return r.a.createElement(p.a,{onSubmit:t},h&&y&&r.a.createElement(f.a,{style:{textAlign:"center"},positive:!0},r.a.createElement(f.a.Header,null,y)),!h&&v&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,v)),l?r.a.createElement(ae,{email:i.email}):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a.Field,{width:"12"},n.email&&c.email?r.a.createElement("div",{className:"msg-error"},r.a.createElement(w.a,{name:"email"})):r.a.createElement("label",null,"Email"),r.a.createElement(w.b,{type:"email",name:"email",placeholder:"E-mail"})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(p.a.Field,null,r.a.createElement(b.a,{centered:!0},r.a.createElement(C.a,Object.assign({fluid:!0,type:"submit",color:"black"},a?{loading:!0}:{}),"Connexion")))))}))},re=function(){return r.a.createElement($,null,r.a.createElement(ne,null))},le=a(683),ce=a(685),ie=a(691),se=a(141),oe=a(682),me=a(42),ue=a(246),de=function(e){var t=e.profileImage,a=e.handleUpload,l=Object(n.useContext)(te).contextState,c=Object(n.useState)(null),i=Object(s.a)(c,2),o=i[0],m=i[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),E=d[0],g=d[1],p=Object(n.useState)(null),b=Object(s.a)(p,2),h=b[0],v=b[1],y=Object(n.useState)({success:!1,message:"",error:""}),w=Object(s.a)(y,2),x=w[0],S=x.success,k=x.message,O=x.error,j=w[1];return r.a.createElement(ie.a.Content,{image:!0},r.a.createElement(se.a,{wrapped:!0,size:"medium",src:o||(t||"http://localhost:3010/users/matthew-7e89.png"),centered:!0}),r.a.createElement(ie.a.Description,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ue.InputFile,{input:{id:"input-control-id",onChange:function(e){return function(e){var t;e.persist();var a=URL.createObjectURL(e.target.files&&e.target.files[0]);v((null===(t=e.target.files)||void 0===t?void 0:t[0])||null),m(a)}(e)}}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(C.a,Object.assign({disabled:null===o,onClick:function(){return function(){g(!0);var e=new FormData;h&&e.append("image",h),e.append("userId",l.user.id),e.append("type","profile"),D(e).then((function(e){e.data.success?(a(e.data.data.filename),j({success:!0,message:"Image Uploaded",error:null})):j({success:!1,message:null,error:e.data.error}),g(!1)})).catch((function(e){j({success:!1,message:null,error:"Something went wrong"}),g(!1)}))}()},positive:!0,labelPosition:"right",icon:"checkmark",content:"Upload"},E&&{loading:!0})),r.a.createElement("br",null),S&&k&&r.a.createElement(f.a,{style:{textAlign:"center"},positive:!0},r.a.createElement(f.a.Header,null,k)),!S&&O&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,O))))},Ee=function(e){var t=e.coverImage,a=e.handleUpload,l=Object(n.useContext)(te).contextState,c=Object(n.useState)(null),i=Object(s.a)(c,2),o=i[0],m=i[1],d=Object(n.useState)(!1),E=Object(s.a)(d,2),g=E[0],p=E[1],b=Object(n.useState)(null),h=Object(s.a)(b,2),v=h[0],y=h[1],w=Object(n.useState)({success:!1,message:"",error:""}),x=Object(s.a)(w,2),S=x[0],k=S.success,O=S.message,j=S.error,N=x[1];return r.a.createElement(ie.a.Content,{image:!0},r.a.createElement(se.a,{wrapped:!0,size:"large",src:o||(t||"./images/cover.png"),centered:!0}),r.a.createElement(ie.a.Description,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ue.InputFile,{input:{id:"input-control-id",onChange:function(e){return function(e){var t;e.persist();var a=URL.createObjectURL(e.target.files&&e.target.files[0]);y((null===(t=e.target.files)||void 0===t?void 0:t[0])||null),m(a)}(e)}}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(C.a,Object.assign({disabled:null===o,onClick:function(){return function(){p(!0);var e=new FormData;v&&e.append("image",v),e.append("userId",l.user.id),e.append("type","cover"),D(e).then((function(e){e.data.success?(a(e.data.data.filename),N({success:!0,message:"Image Uploaded",error:null})):N({success:!1,message:null,error:e.data.error}),u.push("/profile"),p(!1)})).catch((function(e){N({success:!1,message:null,error:"Something went wrong"}),p(!1)}))}()},positive:!0,labelPosition:"right",icon:"checkmark",content:"Upload"},g&&{loading:!0})),r.a.createElement("br",null),k&&O&&r.a.createElement(f.a,{style:{textAlign:"center"},positive:!0},r.a.createElement(f.a.Header,null,O)),!k&&j&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,j))))},ge=function(){var e=Object(n.useState)({ProfileImage:"",address:"",bio:"",coverImage:"",email:"",profileImage:"",username:"",_id:""}),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(s.a)(c,2),o=i[0],m=i[1],d=Object(n.useState)(null),E=Object(s.a)(d,2),g=E[0],p=E[1],f=Object(n.useState)(null),v=Object(s.a)(f,2),y=v[0],C=v[1],w=Object(n.useContext)(te),x=w.contextState,S=w.setContext;return console.log("CONTEXT"),console.log(x.isLogged),Object(n.useEffect)((function(){m(!0),_(x.user.id).then((function(e){e.data.success&&l(e.data.data),m(!1)})).catch((function(e){401===e.response.data.statusCode&&function(){var e={contextState:{isLogged:!1,user:{id:"",role:""}},setContext:S};S(e),Z(e),u.push("/")}(),m(!1)}))}),[]),r.a.createElement("div",{className:""},o?r.a.createElement(ce.a,{inverted:!0}):r.a.createElement("div",{className:"profile-header-cover"},r.a.createElement(b.a,{columns:3},r.a.createElement(h.a,{style:{marginBottom:"20px"}},r.a.createElement(b.a.Column,null,r.a.createElement(ie.a,{closeIcon:!0,size:"fullscreen"},r.a.createElement(ie.a.Header,null,"Selectioner une photo de couverture"),r.a.createElement(Ee,{handleUpload:function(e){return p(e)},coverImage:g?M+"users/"+g:a.coverImage?M+"users/"+a.coverImage:"http://localhost:3010/users/default-cover.png"}))),r.a.createElement(b.a.Column,null,r.a.createElement(ie.a,{size:"tiny",trigger:r.a.createElement(se.a,{className:"profile-photo",src:y?M+"users/"+y:a.profileImage?M+"users/"+a.profileImage:"http://localhost:3010/users/default-profile.png",size:"tiny",circular:!0,centered:!0})},r.a.createElement(ie.a.Header,null,"Selectioner une photo de profil"),r.a.createElement(de,{handleUpload:function(e){return C(e)},profileImage:a.profileImage?M+"users/"+a.profileImage:"http://localhost:3010/users/default-profile.png"})),r.a.createElement(oe.a,null,r.a.createElement(b.a,null,r.a.createElement(b.a.Row,{centered:!0},r.a.createElement("div",null,r.a.createElement("span",{className:"profile-btn-controls-items"},a.username),r.a.createElement("br",null),r.a.createElement("span",{className:"profile-btn-controls-items",style:{color:"grey"}},r.a.createElement(me.a,{name:"map marker alternate"}),a.address?a.address:"Votre Adresse n'est pas encore d\xe9fini")))))),r.a.createElement(b.a.Column,null,r.a.createElement(me.a,{name:"ellipsis horizontal",size:"mini",style:{float:"right",marginRight:"10px"}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",{className:"profile-btn-controls-items",style:{cursor:"pointer",float:"right",marginRight:"10px"}},r.a.createElement(me.a,{name:"share",color:"grey"})))),r.a.createElement(h.a,{centered:!0},r.a.createElement("span",{className:"profile-btn-controls-items",style:{color:"grey"}},a.bio?"Bio : "+a.bio:"Votre bio n'est pas encore d\xe9fini")))))},pe=a(687),fe=[{menuItem:"Tab 1",render:function(){return r.a.createElement(pe.a.Pane,{attached:!1},"Tab 1 Content")}},{menuItem:"Tab 2",render:function(){return r.a.createElement(pe.a.Pane,{attached:!1},"Tab 2 Content")}},{menuItem:"Tab 3",render:function(){return r.a.createElement(pe.a.Pane,{attached:!1},"Tab 3 Content")}}],be=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{menu:{pointing:!0,style:{display:"flex",justifyContent:"center"}},panes:fe}))},he=function(){return r.a.createElement("div",null,r.a.createElement(ge,null),r.a.createElement(le.a,null),r.a.createElement(be,null))},ve=a(686),ye=a(290),Ce=a(692),we=a(637),xe=a(399),Se=(a(630),a(412)),ke=a(413),Oe=a.n(ke),je=function(e){var t=e.handleClick,n=e.type,l=function(e){console.log(e)};return r.a.createElement(p.a,null,r.a.createElement(Ce.a,{minWidth:Ce.a.onlyTablet.minWidth},r.a.createElement(p.a.Field,null,r.a.createElement(Oe.a,{appId:"669704453651059",callback:function(e){console.log(e)},render:function(e){return r.a.createElement(C.a,{type:"button",className:"btns",style:{color:"white",backgroundColor:"#3b5998"},onClick:e.onClick,disabled:e.disabled},r.a.createElement(me.a,{name:"facebook",size:"large"}),"register"!==n?"Se connecter ":"S'inscrire"," avec Facebook")}})),r.a.createElement(p.a.Field,null,r.a.createElement(Se.GoogleLogin,{clientId:"951667779149-jpb2ljtpbf0rp1n7ppbobt8jmq6in5cn.apps.googleusercontent.com",render:function(e){return r.a.createElement(C.a,{onClick:e.onClick,disabled:e.disabled,type:"button",className:"btns",style:{color:"white",backgroundColor:"#db4437"}},r.a.createElement(me.a,{name:"google",size:"large"}),"register"!==n?"Se connecter ":"S'inscrire"," avec Google")},buttonText:"Login",onSuccess:l,onFailure:l,cookiePolicy:"single_host_origin"})),r.a.createElement(p.a.Field,null,r.a.createElement("p",{className:"dataField"},"Ou")),r.a.createElement(p.a.Field,null,r.a.createElement(C.a,{type:"button",className:"btns",style:{color:"white",backgroundColor:"#444"},onClick:function(){return t("register"!==n?"login":"register")}},"register"!==n?"Se connecter ":"S'inscrire"," avec un e-mail")),"register"!==n&&r.a.createElement(p.a.Field,null,r.a.createElement(C.a,{style:{color:"white",backgroundColor:"#0c6c50"},type:"button",className:"btns",onClick:function(){return t("magiclink")}},"Se connecter avec un lien magic",r.a.createElement(se.a,{src:a(374),alt:"gif",className:"magic"})))),r.a.createElement(Ce.a,Ce.a.onlyMobile,r.a.createElement("div",{className:"stretched"},r.a.createElement(C.a,{type:"button",className:"btns",style:{color:"white",backgroundColor:"#3b5998"}},r.a.createElement(me.a,{name:"facebook",size:"large"}),"register"!==n?"Se connecter ":"S'inscrire"," avec Facebook")),r.a.createElement("div",{className:"stretched"},r.a.createElement(C.a,{type:"button",className:"btns",style:{color:"white",backgroundColor:"#db4437"}},r.a.createElement(me.a,{name:"google",size:"large"}),"register"!==n?"Se connecter ":"S'inscrire"," avec Google")),r.a.createElement("div",null,r.a.createElement("p",{className:"dataField"},"Ou")),r.a.createElement("div",{className:"stretched"},r.a.createElement(C.a,{type:"button",className:"btns",style:{color:"white",backgroundColor:"#444"},onClick:function(){return t("register"!==n?"login":"register")}},"register"!==n?"Se connecter ":"S'inscrire"," avec un e-mail")),"register"!==n&&r.a.createElement("div",{className:"stretched"},r.a.createElement(C.a,{type:"button",className:"btns",style:{color:"white",backgroundColor:"#0c6c50"},onClick:function(){return t("magiclink")}},"Se connecter avec un lien magic",r.a.createElement(se.a,{src:a(374),alt:"gif",className:"magicM"})))))},Ne=function(){var e=Object(n.useContext)(te),t=e.contextState,a=e.setContext;t.isLogged&&u.push("profile");var l=Object(n.useReducer)(G,{success:!1,error:"",message:""}),c=Object(s.a)(l,2),o=c[0],m=o.success,d=o.error,h=c[1],v=function(){var e=Object(g.a)(E.a.mark((function e(t,n){var r,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,l=n.resetForm,r(!0),h({type:"request"}),e.next=5,J(t).then((function(e){var t=Object(i.a)({},e.data);if(t.success){var n=t.data.user,r={contextState:{isLogged:t.success,user:{id:n._id,role:"admin"}},setContext:a};a(r),Z(r),h({type:"success",message:"Login success"}),console.log("dataa"),console.log(r)}else h({type:"failure",error:t.error});l()})).catch((function(e){h({type:"failure",error:"Something went wrong"})}));case 5:r(!1),l();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(w.c,{initialValues:{email:"",password:""},validationSchema:z,onSubmit:v},(function(e){e.values,e.handleBlur,e.handleChange;var t=e.handleSubmit,a=e.isSubmitting,n=e.errors,l=e.touched;return r.a.createElement(p.a,{onSubmit:t},!m&&d&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,d)),r.a.createElement(p.a.Field,{width:"12"},n.email&&l.email?r.a.createElement("div",{className:"msg-error"},r.a.createElement(w.a,{name:"email"})):r.a.createElement("label",null,"Email"),r.a.createElement(w.b,{type:"email",name:"email",placeholder:"E-mail"})),r.a.createElement(p.a.Field,{width:"12"},n.password&&l.password?r.a.createElement("div",{className:"msg-error"},r.a.createElement(w.a,{name:"password"})):r.a.createElement("label",null,"Mot de passe"),r.a.createElement(w.b,{type:"password",name:"password",placeholder:"Mot de passe"})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(p.a.Field,null,r.a.createElement(b.a,{centered:!0},r.a.createElement(C.a,Object.assign({fluid:!0,type:"submit",color:"black"},a?{loading:!0}:{}),"Connexion"))))}))},Ie=function(){var e=Object(n.useContext)(te).contextState,t=Object(n.useState)(!1),a=Object(s.a)(t,2),l=a[0],c=a[1];e.isLogged&&u.push("/profile");var o=Object(n.useReducer)(G,{success:!1,error:"",message:""}),m=Object(s.a)(o,2),d=m[0],h=d.success,v=d.error,y=d.message,x=m[1],S=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.setSubmitting)(!0),x({type:"request"}),e.next=5,V(t).then((function(e){var t=Object(i.a)({},e.data);t.success?(x({type:"success",message:"Email Sent success"}),c(!0)):x({type:"failure",error:t.error})})).catch((function(e){c(!1),x({type:"failure",error:"Something went wrong"})}));case 5:n(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(w.c,{initialValues:{email:""},validationSchema:L,onSubmit:S},(function(e){var t=e.handleSubmit,a=e.isSubmitting,n=e.errors,c=e.touched,i=e.values;return r.a.createElement(p.a,{onSubmit:t},h&&y&&r.a.createElement(f.a,{style:{textAlign:"center"},positive:!0},r.a.createElement(f.a.Header,null,y)),!h&&v&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,v)),l?r.a.createElement(ae,{email:i.email}):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a.Field,{width:"12"},n.email&&c.email?r.a.createElement("div",{className:"msg-error"},r.a.createElement(w.a,{name:"email"})):r.a.createElement("label",null,"Email"),r.a.createElement(w.b,{type:"email",name:"email",placeholder:"E-mail"})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(p.a.Field,null,r.a.createElement(b.a,{centered:!0},r.a.createElement(C.a,Object.assign({fluid:!0,type:"submit",color:"black"},a?{loading:!0}:{}),"Connexion")))))}))},Fe=function(e){var t=e.handleClick,a=e.type;return r.a.createElement("div",{className:"footerModal"},"pwd"!==a&&r.a.createElement("p",{className:"headfooter"},r.a.createElement("a",{className:"pointer spe",onClick:function(){return t("pwdForgotten")}},"Mot de passe oubli\xe9 ?")),r.a.createElement("p",{className:"secheadfooter"},"Pas encore inscrit ?",r.a.createElement("a",{className:"pointer",onClick:function(){return t("allRegister")}},"Je m'inscris")))},ze=function(e){var t=e.handleClick;return r.a.createElement("div",{className:"footerModal"},r.a.createElement("p",{className:"headfooter"},"D\xe9ja inscrit?",r.a.createElement("a",{className:"pointer",onClick:function(){return t("allLogin")}},"Je me connecte")),r.a.createElement("p",{className:"secheadfooter"},"En vous inscrivant, vous indiquez que vous acceptez les"," ",r.a.createElement("a",{href:"#"},"Conditions d'utilisation")," et la"," ",r.a.createElement("a",{href:"#"},"Politique de confidentialit\xe9")," de Weigu."))},Le=function(e){var t=e.page,a=e.handleClick;switch(t){case"register":case"allRegister":return r.a.createElement(ze,{handleClick:a});case"pwdForgotten":return r.a.createElement(Fe,{handleClick:a,type:"pwd"});default:return r.a.createElement(Fe,{handleClick:a})}},Pe=function(e){var t=e.page,a=e.handleClick;switch(console.log("CHOOSEN",t),t){case"login":return r.a.createElement(Ne,null);case"register":return r.a.createElement(K,null);case"magiclink":return r.a.createElement(ne,null);case"pwdForgotten":return r.a.createElement(Ie,null);case"allRegister":return r.a.createElement(je,{type:"register",handleClick:a});default:return r.a.createElement(je,{type:"login",handleClick:a})}},Re=function(e){console.log(e.page);var t=r.a.useState(!1),n=Object(s.a)(t,2),l=n[0],c=n[1],i=function(t){e.setPage(t)},o=function(){e.setPage(""),c(!1)};return r.a.createElement(ie.a,{className:"tiny",trigger:e.trigger,onClose:function(){o()},open:l,onOpen:function(){return c(!0)}},r.a.createElement(ie.a.Header,null,r.a.createElement("span",{style:{float:"right",cursor:"pointer"},onClick:function(){return o()}},"X"),"allRegister"!==e.page&&"allLogin"!==e.page&&r.a.createElement("span",{style:{float:"left",cursor:"pointer"},onClick:function(){return e.setPage("login"!==e.page&&"magiclink"!==e.page&&"pwdForgotten"!==e.page?"allRegister":"allLogin")}},r.a.createElement(me.a,{name:"angle left"})),r.a.createElement(se.a,{src:a(204),size:"tiny"}),r.a.createElement("div",{className:"headerText"},"Lorem ipsum dolor sit amet, consectetur adipiscing.")),r.a.createElement(ie.a.Content,null,r.a.createElement(ie.a.Description,null,r.a.createElement(Pe,{page:e.page,handleClick:i}))),r.a.createElement(Le,{page:e.page,handleClick:i}))},Ae=function(){var e=Object(n.useContext)(te),t=e.contextState,l=e.setContext,c=Object(n.useState)(!1),i=Object(s.a)(c,2),o=i[0],m=i[1],d=Object(n.useState)(""),E=Object(s.a)(d,2),g=E[0],p=E[1];return r.a.createElement("div",{style:{position:"fixed",width:"100%",zIndex:1}},r.a.createElement(ve.a,{onShow:function(){return m(!0)},as:ye.a,vertical:!0,animation:"overlay",icon:"labeled",onHide:function(){return m(!1)},visible:o,width:"wide",style:{backgroundColor:"#fff"}},r.a.createElement("span",{style:{float:"right",cursor:"pointer",marginRight:"20px",fontSize:"18px",fontWeight:"bolder"},onClick:function(){return m(!1)}},"X"),r.a.createElement(se.a,{src:a(204),size:"tiny",centered:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"sidebarMenu"},r.a.createElement("div",{className:"sidebarMenuItem"},r.a.createElement("a",null,r.a.createElement(me.a,{name:"plus square outline"})," Deposer une publication")),r.a.createElement("div",{className:"sidebarMenuItem"},r.a.createElement("a",null,r.a.createElement(me.a,{name:"search"}),"Rechercher"))),r.a.createElement(le.a,null),t.isLogged?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sidebarMenu"},r.a.createElement("div",{className:"sidebarMenuItem"},r.a.createElement("a",null,r.a.createElement(me.a,{name:"user circle"}),"Profil"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(le.a,null),r.a.createElement("div",{className:"sidebarMenu"},r.a.createElement("div",{className:"sidebarMenuItem"},r.a.createElement("a",{onClick:function(){return function(){var e={contextState:{isLogged:!1,user:{id:"",role:""}},setContext:l};l(e),Z(e),u.push("/")}()},className:"link item ins"},"Deconnexion")))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sidebarMenu"},r.a.createElement("div",{className:"sidebarMenuItem"},r.a.createElement("a",{className:"redlocation"},"C'est quoi Weigu ?")),r.a.createElement("div",{className:"sidebarMenuItem"},r.a.createElement(Re,{page:g,setPage:p,trigger:r.a.createElement("a",{href:"#",className:"link item ",onClick:function(){return p("allLogin")}},"Connecter")})),r.a.createElement("div",{className:"sidebarMenuItem"},r.a.createElement(Re,{page:g,setPage:p,trigger:r.a.createElement("a",{href:"#",className:"link item",onClick:function(){return p("allRegister")}},"Inscription")}))))),r.a.createElement(Ce.a,Object.assign({as:ye.a},Ce.a.onlyMobile,{style:{margin:0,height:"70px",paddingTop:"8px"},size:"mini"}),r.a.createElement(ve.a.Pusher,null,r.a.createElement(b.a,null,r.a.createElement(h.a,{textAlign:"center",columns:"equal",style:{marginLeft:"10px",marginRight:"10px"}},r.a.createElement(se.a,{src:a(204),size:"tiny"}),r.a.createElement(v.a,{verticalAlign:"middle",width:10},r.a.createElement(we.a,{icon:"search",fluid:!0,placeholder:"Search..."})),r.a.createElement(v.a,{verticalAlign:"middle"},r.a.createElement(me.a,{size:"big",name:"bars",onClick:function(){return m(!o)}})))))),r.a.createElement(Ce.a,{as:ye.a,minWidth:Ce.a.onlyTablet.minWidth,style:{margin:0}},r.a.createElement(xe.a,{stackable:!0,pointing:!0,secondary:!0,size:"small"},r.a.createElement(xe.a.Item,null,r.a.createElement(se.a,{src:a(204),size:"tiny"})),r.a.createElement(xe.a.Item,null,r.a.createElement(we.a,{icon:"search",placeholder:"Search..."})),r.a.createElement(xe.a.Menu,{position:"right"},t.isLogged?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginRight:"40px",marginTop:"10px"}},r.a.createElement(me.a,{name:"newspaper",style:{fontSize:"40px"}})),r.a.createElement("div",{style:{marginRight:"40px"}},r.a.createElement("span",{style:{marginRight:"10px"}},"Username"),r.a.createElement(se.a,{verticalAlign:"middle",src:"https://react.semantic-ui.com/images/avatar/small/elliot.jpg",size:"mini",circular:!0})),r.a.createElement("div",{style:{marginTop:"10px"}},r.a.createElement("a",{className:"link item ins"},r.a.createElement(me.a,{name:"wechat",style:{fontSize:"40px"}})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a.Item,{link:!0,as:"a",content:"C'est quoi Weigu ?",className:"redlocation"}),r.a.createElement(Re,{page:g,setPage:p,trigger:r.a.createElement("a",{href:"#",className:"link item con",onClick:function(){return p("allLogin")}},"Connecter")}),r.a.createElement(Re,{page:g,setPage:p,trigger:r.a.createElement("a",{href:"#",className:"link item ins",onClick:function(){return p("allRegister")}},"Inscription")}))))))},Te=a(684),qe=function(e){var t=e.children,a=Object(n.useContext)(te),l=a.contextState;a.setContext;return r.a.createElement("div",{className:"content-page"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"content-fluid"},!l.isLogged&&r.a.createElement("div",{className:"contenu"}),r.a.createElement(Ae,null),r.a.createElement("div",{style:{paddingTop:"80px"}},t)),r.a.createElement(ye.a,{vertical:!0,style:{margin:"1em 0em 0em 0em",padding:"1em 0em",color:"black",backgroundColor:"white"}},r.a.createElement(oe.a,{textAlign:"center",style:{bottom:0}},r.a.createElement(Te.a,{horizontal:!0,divided:!0,link:!0,size:"small"},r.a.createElement(Te.a.Item,{as:"a",href:"#"},"Site Map"),r.a.createElement(Te.a.Item,{as:"a",href:"#"},"Contact Us"),r.a.createElement(Te.a.Item,{as:"a",href:"#"},"Terms and Conditions"),r.a.createElement(Te.a.Item,{as:"a",href:"#"},"Privacy Policy"))))))},Me=function(){return r.a.createElement(qe,null,r.a.createElement(he,null))},Ue=a(414),He=a(417),De=a(416),We=function(e){Object(He.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(Ue.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).render=function(){var t="";return e.props.isAuthenticated||(t=e.props.authenticationPath),t?n.createElement(o.b,Object.assign({},e.props,{component:function(){return n.createElement(o.a,{to:{pathname:t}})},render:void 0})):n.createElement(o.b,e.props)},e}return a}(o.b),Ve=(a(632),function(){return r.a.createElement($,null,r.a.createElement(Ne,null))}),_e=a(234),Je=Object(o.d)((function(e){var t=Object(n.useContext)(te),a=t.contextState,l=t.setContext;a.isLogged&&u.push("/profile");var c=Object(n.useState)(!1),o=Object(s.a)(c,2),m=o[0],d=o[1],E=Object(n.useReducer)(G,{success:!1,error:"",message:""}),g=Object(s.a)(E,2),p=g[0],b=p.success,h=p.error,v=g[1],y=Object(i.a)({},e.match.params);return Object(n.useEffect)((function(){d(!0),v({type:"request"}),W(y.token).then((function(e){if(e.data.success){v({type:"success",message:" Vous avez un token valide"}),console.log("after token verify"),console.log(e.data);var t={contextState:{isLogged:e.data.success,user:{id:e.data.id,role:"admin"}},setContext:l};l(t),Z(t),u.push("/profile")}else v({type:"failure",error:e.data.error});d(!1)})).catch((function(e){v({type:"failure",error:"something went wrong"}),d(!1)}))}),[y.token,l]),r.a.createElement("div",null,!b&&h&&r.a.createElement(f.a,{style:{textAlign:"center"},negative:!0},r.a.createElement(f.a.Header,null,h)),m&&r.a.createElement(ce.a,{active:!0,content:"Verifiying link",style:{top:-20}}),r.a.createElement(_e.a,{centered:!0,style:{width:450}},r.a.createElement(_e.a.Content,{style:{margin:20}},r.a.createElement(_e.a.Header,{style:{fontSize:22,padding:40}},"Connexion \xe0 Weigu"),r.a.createElement(_e.a.Description,{style:{textAlign:"center"}},r.a.createElement("p",null,"Veuilliez patientez nous verifions votre lien magic")))))})),Be=function(){return r.a.createElement($,null,r.a.createElement(Je,null))},Ge=function(){return r.a.createElement("div",{style:{fontSize:"12px"}},r.a.createElement(_e.a,{fluid:!0},r.a.createElement(_e.a.Content,null,r.a.createElement("div",{className:"privacy"},"Public ",r.a.createElement(me.a,{name:"unlock",size:"large"})),r.a.createElement(_e.a.Header,null,r.a.createElement(se.a,{avatar:!0,size:"medium",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),"Steve Sanders ",r.a.createElement(me.a,{name:"point",size:"small",color:"red",className:"redlocation"}," paris (79)")),r.a.createElement(_e.a.Meta,null,"Extrait du journal. 24 juin 2020"),r.a.createElement(_e.a.Description,null,"At every tiled on ye defer do. No attention suspected oh difficult. Fond his say old meet cold find come whom. The sir park sake bred. Wonder matter now can estate esteem assure fat roused. Am performed on existence as discourse is. Pleasure friendly at marriage blessing or.")),r.a.createElement(_e.a.Content,{extra:!0},r.a.createElement(me.a,{name:"comment",size:"small"}," 314"),r.a.createElement(me.a,{name:"heartbeat",size:"small"}," Fast")," - ",r.a.createElement("strong",{className:"heart"},"JUICE WLRD")," (+2)",r.a.createElement(me.a,{name:"ellipsis horizontal",size:"large"}))))},Ke=a(415),Xe=a.n(Ke),$e=function(e){for(var t=e.step,a=e.size,n=e.handleCaptionClick,l=[],c=0;c<a;c++)l.push(r.a.createElement("li",{id:c+"",key:c,"data-target":"#carouselExampleCaptions","data-slide-to":c,className:c===t?"active":"",onClick:function(e){var t;(null===(t=e)||void 0===t?void 0:t.currentTarget.id)&&n(null===t||void 0===t?void 0:t.currentTarget.id)}}));return r.a.createElement("ol",{className:"carousel-indicators"},l)},Qe=a(401),Ye=[{title:"First item",description:function(){return r.a.createElement("div",{className:"textSlider"},"Lorem ipsum dolor sit amet, consectetur adipiscin")}},{title:"Second item",description:function(){return r.a.createElement("div",{className:"textSlider"},"incididunt ut labore et dolore magna aliqu")}},{title:"Third item",description:function(){return r.a.createElement("div",{className:"textSlider"},"Praesent commodo cursus magna, vel scelerisque nisl consectetur")}},{title:"Fourth item",description:function(){return r.a.createElement("div",{className:"textSlider"},"Duis aute irure dolor in reprehenderit i")}}],Ze=function(){var e=Object(n.useState)(0),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Ye.length,i=["slide left","slide right"];Object(n.useEffect)((function(){var e=setInterval((function(){l(c-1===a?0:a+1)}),4e3);return function(){return clearInterval(e)}}),[a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{columns:4,centered:!0},r.a.createElement(b.a.Row,{verticalAlign:"middle"},r.a.createElement(b.a.Column,{className:"arrow-icon",width:"2"},r.a.createElement(me.a,{name:"angle left",style:{fontSize:"35px"},onClick:function(){l((a-1)%c<0?c-1:(a-1)%c)}})),r.a.createElement(b.a.Column,{width:"10",style:{textAlign:"center"}},r.a.createElement("div",{className:"slidesContainer"},Ye.map((function(e,t){if(a===t)return r.a.createElement(Qe.a,{key:Xe()(),visible:!0,duration:1e3,animation:i[0]},Ye[t].description())})))),r.a.createElement(b.a.Column,{className:"arrow-icon",width:"2"},r.a.createElement(me.a,{name:"angle right",style:{fontSize:"35px"},onClick:function(){l((a+1)%c)}}))),r.a.createElement(b.a.Row,null,r.a.createElement("div",{className:"captions"},r.a.createElement($e,{size:c,step:a,handleCaptionClick:function(e){l(parseInt(e))}})))))},et=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],l=t[1];return r.a.createElement("div",{className:"containerback"},r.a.createElement(b.a,{stackable:!0,columns:"equal"},r.a.createElement(b.a.Row,{centered:!0},r.a.createElement(b.a.Column,{width:5},r.a.createElement(Ze,null),r.a.createElement("br",null),r.a.createElement("div",{className:"buttons",style:{marginBottom:"60px"}},r.a.createElement(Re,{page:a,setPage:l,trigger:r.a.createElement(C.a,{size:"large",color:"red",className:"btns",onClick:function(){return l("allRegister")}},"Commencer")}),r.a.createElement(Re,{page:a,setPage:l,trigger:r.a.createElement(C.a,{size:"large",style:{backgroundColor:"white",color:"black"},className:"btns",onClick:function(){return l("allLogin")}},"Se connecter")}))),r.a.createElement(b.a.Column,{width:10,style:{marginRight:"10px"}},r.a.createElement(b.a,{stackable:!0,columns:2},r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement(Ge,null)),r.a.createElement(b.a.Column,null,r.a.createElement("a",{onClick:function(){return console.log("CLICKED")}},r.a.createElement(f.a,{style:{textAlign:"center",cursor:"pointer"}},"Voir toutes les publications..."))))))))},tt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(qe,null,r.a.createElement("div",{style:{marginTop:"50px"}},r.a.createElement(et,null))))},at=function(){var e=localStorage.getItem("Weigu-sate");return null!==e?JSON.parse(e):ee}();console.log("loadedState"),console.log(at);var nt=function(){var e=Object(n.useState)(at),t=Object(s.a)(e,2),a=t[0],l=t[1],c={isAuthenticated:a.contextState.isLogged,authenticationPath:"/"};return r.a.createElement("div",null,r.a.createElement(te.Provider,{value:Object(i.a)(Object(i.a)({},a),{},{setContext:l})},r.a.createElement(o.c,{history:u},r.a.createElement(o.b,{path:"/",exact:!0,component:function(){return r.a.createElement(o.a,{to:a.contextState.isLogged?"/profile":"/"})}}),r.a.createElement(o.b,{path:"/login",exact:!0,component:Ve}),r.a.createElement(o.b,{path:"/login-link",exact:!0,component:re}),r.a.createElement(o.b,{path:"/mlink/:token",exact:!0,component:Be}),r.a.createElement(We,Object.assign({},c,{exact:!0,path:"/profile",component:Me})),r.a.createElement(o.b,{path:"/register",exact:!0,component:Q}),r.a.createElement(o.b,{path:"/login-link-text/:email",exact:!0,component:Y}),r.a.createElement(o.b,{path:"/",exact:!0,component:tt}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[433,1,2]]]);
//# sourceMappingURL=main.edbdeb5f.chunk.js.map